<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="pageTitle">å®¶äº‹å¤§ä½œæˆ°</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¤</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <style>
        :root {
            --font-size-base: 16px;
            --light-bg: #F2F6D0;
            --light-container-bg: #EFDCAB;
            --light-accent-bg: #ebb881;
            --light-text: #443627;
            --light-border: #443627;
            --light-glow: rgba(235, 184, 129, 0.7);
            
            --dark-bg: #3A322C;
            --dark-container-bg: #4D443C;
            --dark-accent-bg: #D4B996;
            --dark-text: #E5D3B3;
            --dark-border: #E5D3B3;
            --dark-glow: rgba(229, 211, 179, 0.5);
            --dark-shadow-color: #2b2520;
            
            --cb-bg: #f0f0f0;
            --cb-container-bg: #d9d9d9;
            --cb-accent-bg: #005fcc;
            --cb-text: #1a1a1a;
            --cb-border: #1a1a1a;
            --cb-glow: rgba(0, 95, 204, 0.5);
        }

        [data-theme="light"] {
            --bg-color: var(--light-bg);
            --container-bg-color: var(--light-container-bg);
            --accent-bg-color: var(--light-accent-bg);
            --text-color: var(--light-text);
            --border-color: var(--light-border);
            --glow-color: var(--light-glow);
            --shadow-color: var(--light-border);
            --btn-active-text-color: var(--light-text);
        }

        [data-theme="dark"] {
            --bg-color: var(--dark-bg);
            --container-bg-color: var(--dark-container-bg);
            --accent-bg-color: var(--dark-accent-bg);
            --text-color: var(--dark-text);
            --border-color: var(--dark-border);
            --glow-color: var(--dark-glow);
            --shadow-color: var(--dark-shadow-color);
            --btn-active-text-color: var(--dark-bg);
        }
        
        [data-theme="colorblind"] {
            --bg-color: var(--cb-bg);
            --container-bg-color: var(--cb-container-bg);
            --accent-bg-color: var(--cb-accent-bg);
            --text-color: var(--cb-text);
            --border-color: var(--cb-border);
            --glow-color: var(--cb-glow);
            --shadow-color: var(--cb-border);
            --btn-active-text-color: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scrollbar-color: var(--accent-bg-color) var(--container-bg-color);
            scrollbar-width: thin;
        }
        
        *::-webkit-scrollbar {
            width: 10px;
        }

        *::-webkit-scrollbar-track {
            background: var(--container-bg-color);
        }

        *::-webkit-scrollbar-thumb {
            background-color: var(--accent-bg-color);
            border-radius: 20px;
            border: 2px solid var(--container-bg-color);
        }

        html {
            font-size: var(--font-size-base);
        }

        body {
    font-family: 'DotGothic16', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.5s, color 0.5s;
    overflow: hidden; /* Added: Extra insurance to prevent any scrolling on the body */
}

.app-container {
    box-sizing: border-box; /* <<< THE FIX IS HERE */
    width: 95vw;
    height: 95vh;
    max-width: 1400px;
    max-height: 900px;
    background-color: var(--container-bg-color);
    border: 4px solid var(--border-color);
    box-shadow: 8px 8px 0px var(--shadow-color);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    transition: background-color 0.5s, border-color 0.5s, box-shadow 0.5s;
}
        header {
            flex: 0 0 auto;
            border-bottom: 4px solid var(--border-color);
            padding-bottom: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            max-height: 10vh;
        }

        .logo {
            font-size: clamp(1.0rem, 3vw, 2.5rem);
            font-weight: bold;
            color: var(--text-color);
            text-shadow: 3px 3px 0 var(--shadow-color), 0 0 15px var(--glow-color);
            cursor: pointer;
  
        }

        nav {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            font-family: inherit;
            font-size: clamp(0.8rem, 2vw, 1rem);
            padding: 0.4rem 0.8rem;
            border: 3px solid var(--border-color);
            background-color: var(--bg-color);
            color: var(--text-color);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
        }

        .nav-btn.active, .nav-btn:hover {
            background-color: var(--accent-bg-color);
            box-shadow: 4px 4px 0px var(--shadow-color);
            transform: translate(-4px, -4px);
            color: var(--btn-active-text-color);
        }

        .nav-btn:active {
            transform: translate(0, 0);
            box-shadow: none;
        }

        main {
            flex: 1 1 0;
            overflow: hidden;
            position: relative;
        }

        .view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }

        .view.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        #game-view {
            display: flex;
            flex-direction: row;
            gap: 1.5rem;
            height: 100%;
        }

        .scene-display {
            flex: 0 0 30%;
            background-color: var(--bg-color);
            border: 4px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(5rem, 15vw, 10rem);
        }

        .story-panel {
            flex: 1 1 70%;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            overflow: hidden;
        }

        #dialogue-box {
            background-color: var(--accent-bg-color);
            border: 3px solid var(--border-color);
            padding: 1.5rem;
            flex: 1 1 0;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 1.2rem;
            color: var(--btn-active-text-color);
        }

        #options-box {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 0 0 auto;
            max-height: 50%;
            overflow-y: auto;
            padding: 5px;
        }

        .option-btn {
            font-family: inherit;
            font-size: 1.1rem;
            width: 100%;
            padding: 1rem;
            text-align: left;
            border: 3px solid var(--border-color);
            background-color: var(--container-bg-color);
            color: var(--text-color);
            cursor: pointer;
            box-shadow: 4px 4px 0 var(--shadow-color);
            transition: transform 0.1s, box-shadow 0.1s;
            flex-shrink: 0;
        }

        .option-btn:hover {
            background-color: var(--bg-color);
        }
        
        .option-btn:active {
            transform: translate(4px, 4px);
            box-shadow: none;
        }

        .status-grid, .achievement-grid, .world-content {
            height: 100%;
            overflow-y: auto;
            padding: 1rem;
            background: var(--bg-color);
            border: 3px solid var(--border-color);
        }
        
        .status-grid, .achievement-grid {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }

        .card {
            background: var(--container-bg-color);
            border: 3px solid var(--border-color);
            padding: 1.5rem;
        }
        
        .world-content h3, .world-content h4 {
            margin-bottom: 1em;
        }

        .world-content {
            padding: 2rem;
        }

        .world-content p {
            margin-bottom: 1em;
            line-height: 1.8;
        }

        .card h3 {
            color: var(--text-color);
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 1px 1px 0 var(--shadow-color);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: var(--bg-color);
            border: 2px solid var(--border-color);
            margin-top: 0.5rem;
        }

        .progress-bar-inner {
            height: 100%;
            background-color: var(--accent-bg-color);
            width: 50%;
            transition: width 0.5s;
        }
        
        .achievement.unlocked {
            background-color: var(--accent-bg-color);
        }
        
        .achievement.unlocked h3, .achievement.unlocked p {
            color: var(--btn-active-text-color);
        }

        .achievement.unlocked p {
            opacity: 0.8;
        }

        .floating-btn-container {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 1000;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            background-color: var(--container-bg-color);
            color: var(--text-color);
            border: 3px solid var(--border-color);
            box-shadow: 4px 4px 0 var(--shadow-color);
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s;
        }

        .floating-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 var(--shadow-color);
            background-color: var(--accent-bg-color);
            color: var(--btn-active-text-color);
        }

        .floating-btn:active {
            transform: translate(4px, 4px);
            box-shadow: none;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--bg-color);
            padding: 2rem;
            border: 4px solid var(--border-color);
            box-shadow: 8px 8px 0px var(--shadow-color);
            max-width: 600px;
            width: 90%;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-content .modal-title {
             margin-bottom: 1.5rem;
        }

        .modal-content .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .modal-content p {
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        
        #accessibility-modal .modal-content h4 { margin-top: 1.5rem; margin-bottom: 0.5rem; }

        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px dashed var(--border-color);
        }
        .settings-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .settings-row button, .modal-action-btn {
            font-family: inherit;
            font-size: 1rem;
            padding: 0.5rem 1rem;
            border: 3px solid var(--border-color);
            background-color: var(--container-bg-color);
            color: var(--text-color);
            cursor: pointer;
        }
        .modal-action-btn {
            display: block;
            margin: 2rem auto 0;
            min-width: 120px;
        }

        @media (max-width: 768px) {
            html { 
                font-size: 14px; 
            }
            .app-container {
                padding: 0.5rem;
                gap: 0.5rem;
                border-width: 2px;
            }
             header {
                padding-bottom: 0.5rem;
                justify-content: center;
                border-bottom-width: 2px;
            }
            #game-view { 
                flex-direction: column;
                gap: 0.5rem;
            }
            .scene-display { 
                flex: 0 0 30%;
                font-size: clamp(4rem, 20vh, 6rem);
            }
            .story-panel {
                flex: 1 1 70%;
            }
            #dialogue-box {
                font-size: 1rem;
                padding: 1rem;
            }
            .option-btn {
                font-size: 0.9rem;
                padding: 0.75rem;
            }
            .floating-btn-container { bottom: 0.5rem; left: 0.5rem; }
            .floating-btn { width: 40px; height: 40px; font-size: 1.2rem; }
        }
    </style>
</head>
<body data-theme="light">
    <div class="app-container" role="application">
        <header role="banner">
            <div class="logo" onclick="location.reload()" role="button" tabindex="0" data-lang-key="title">å®¶äº‹å¤§ä½œæˆ°</div>
            <nav role="navigation" aria-label="Main Navigation">
                <button class="nav-btn active" data-view="game-view" data-lang-key="nav_main_game">ä¸»éŠæˆ²</button>
                <button class="nav-btn" data-view="status-view" data-lang-key="nav_status">è§’è‰²ç‹€æ…‹</button>
                <button class="nav-btn" data-view="achievements-view" data-lang-key="nav_achievements">æˆå°±ç³»çµ±</button>
                <button class="nav-btn" data-view="world-view" data-lang-key="nav_worldview">ä¸–ç•Œè§€</button>
            </nav>
        </header>

        <main role="main">
            <div id="game-view" class="view active" role="region" aria-labelledby="game-view-label">
                <h2 id="game-view-label" class="sr-only" style="display:none;">Main Game View</h2>
                <div class="scene-display" id="scene-image" aria-live="polite" aria-atomic="true"></div>
                <div class="story-panel">
                    <div id="dialogue-box" aria-live="polite" aria-atomic="true"></div>
                    <div id="options-box" role="radiogroup" aria-label="Story Choices"></div>
                </div>
            </div>

            <div id="status-view" class="view" role="region" aria-labelledby="status-view-label" aria-hidden="true">
                 <h2 id="status-view-label" class="sr-only">Character Status</h2>
                <div class="status-grid" id="status-grid-content"></div>
            </div>

            <div id="achievements-view" class="view" role="region" aria-labelledby="achievements-view-label" aria-hidden="true">
                <h2 id="achievements-view-label" class="sr-only">Achievements</h2>
                 <div class="achievement-grid" id="achievement-grid-content"></div>
            </div>

            <div id="world-view" class="view" role="region" aria-labelledby="world-view-label" aria-hidden="true">
                 <div class="world-content" id="world-content-dynamic">
                    <h3 data-lang-key="world_title">ğŸŒ ä¸–ç•Œè§€è¨­å®š</h3>
                    <p data-lang-key="world_p1">æ­¡è¿ä¾†åˆ°ã€Œç¾å¯¦2025è™Ÿã€å¹³è¡Œå®‡å®™ä¸–ç•Œï¼Œä¸€å€‹è¡¨é¢çœ‹ä¼¼å¹³å‡¡ï¼Œå¯¦å‰‡...éå¸¸å±éšªçš„åœ°æ–¹ã€‚</p>
                    <p data-lang-key="world_p2">åœ¨é€™è£¡ï¼Œæ—¥å¸¸çš„å®¶å‹™è¢«ä¸€ç¨®ç¥ç§˜çš„å®‡å®™å°„ç·šã€Œæ‡¶æƒ°ç²’å­ã€æ‰€å½±éŸ¿ï¼Œå®ƒå€‘æœƒå¯¦é«”åŒ–æˆå„ç¨®è¢«ç¨±ç‚ºã€Œå®¶äº‹ç¸ã€çš„éº»ç…©å­˜åœ¨ã€‚</p>
                    <p data-lang-key="world_p3">ä¾‹å¦‚ï¼Œå †ç©çš„ç¢—ç›¤æœƒèåˆæˆé»æ»‘çš„ã€Œæ²¹è†©å²èŠå§†ã€ï¼Œæ•£è½çš„è¡£ç‰©æœƒç³¾çºæˆã€Œæ£‰çµ®å·¨èŸ’ã€ï¼Œè€Œå¿˜è¨˜å€’çš„åƒåœ¾å‰‡æœƒå­•è‚²å‡ºæƒ¡è‡­çš„ã€Œè…æ•—å…ƒç´ ã€ã€‚</p>
                    <p data-lang-key="world_p4">ä½ å’Œä½ çš„ä¼´ä¾¶ï¼Œä½œç‚ºé€™å€‹å®¶çš„ã€Œé ˜åŸŸå®ˆè­·è€…ã€ï¼Œå¿…é ˆé‹ç”¨æ™ºæ…§ã€æºé€šå’Œå¶çˆ¾çš„å¿…æ®ºæŠ€ï¼ˆä¾‹å¦‚å«å¤–è³£ï¼‰ï¼Œä¾†æ·¨åŒ–é€™äº›å®¶äº‹ç¸ï¼Œç¶­è­·å…©äººå°å¤©åœ°çš„å’Œå¹³èˆ‡ç§©åºã€‚</p>
                    <p data-lang-key="world_p5">è¨˜ä½ï¼Œé€™ä¸æ˜¯ä¸€å ´æˆ°çˆ­ï¼Œæˆ°çˆ­æ°¸é æ²’æœ‰è´å®¶ã€‚ç¥ä½ å¥½é‹ï¼Œå‹‡è€…ï¼</p>
                </div>
            </div>
        </main>
    </div>

    <div class="floating-btn-container">
        <button class="floating-btn" id="settings-btn" aria-label="Settings">âš™ï¸</button>
        <button class="floating-btn" id="info-btn" aria-label="Information"> i </button>
    </div>

    <div class="modal-overlay" id="settings-modal" role="dialog" aria-modal="true" aria-labelledby="settings-title">
        <div class="modal-content">
            <button class="close-modal" data-modal="settings-modal" aria-label="Close Settings">&times;</button>
            <h3 id="settings-title" class="modal-title" data-lang-key="settings_title">è¨­å®šä¸­å¿ƒ</h3>
             <div class="settings-row">
                <span data-lang-key="settings_language">èªè¨€ (Language)</span>
                <button id="language-toggle-btn">English</button>
            </div>
            <div class="settings-row">
                <span data-lang-key="settings_theme">ä¸»é¡Œæ¨¡å¼</span>
                <button id="theme-toggle-btn" data-lang-key="settings_theme_toggle_dark">åˆ‡æ›è‡³å¤œé–“æ¨¡å¼</button>
            </div>
             <div class="settings-row">
                <span data-lang-key="settings_colorblind">è¼”åŠ©æ¨¡å¼</span>
                <button id="colorblind-toggle-btn" data-lang-key="settings_colorblind_toggle_on">é–‹å•Ÿè‰²ç›²æ¨¡å¼</button>
            </div>
            <div class="settings-row">
                <span data-lang-key="settings_fontsize">å­—é«”å¤§å°</span>
                <div>
                    <button id="font-decrease-btn" aria-label="Decrease Font Size">-A</button>
                    <button id="font-increase-btn" aria-label="Increase Font Size">A+</button>
                </div>
            </div>
             <div class="settings-row">
                <span data-lang-key="settings_progress">éŠæˆ²é€²åº¦</span>
                <button id="reset-progress-btn" data-lang-key="settings_reset">æ¸…é™¤æ‰€æœ‰æˆå°±</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="info-modal" role="dialog" aria-modal="true" aria-labelledby="info-title">
        <div class="modal-content">
            <button class="close-modal" data-modal="info-modal" aria-label="Close Information">&times;</button>
            <div id="info-content-dynamic">
                <h3 id="info-title" class="modal-title" data-lang-key="info_title">é—œæ–¼æœ¬å°ˆæ¡ˆ</h3>
                <p data-lang-key="info_p1">æœ¬ä½œå“ç‚ºåƒåŠ è‡ºä¸­å¸‚æ”¿åºœç¤¾æœƒå±€ä¸»è¾¦ä¹‹ã€Œ2025æ€§åˆ¥å¤šåª’é«”å¾µé¸æ´»å‹•ã€æ‰€å‰µä½œã€‚ä¸»é¡Œç‚ºã€Œæ€§åˆ¥å…±å‰µâˆæ•¸ä½è—æƒ³ã€ï¼Œå¸Œæœ›é€éä¸€å€‹å……æ»¿y2kå¾©å¤éŠæˆ²é¢¨æ ¼çš„äº’å‹•æ•…äº‹ï¼Œæ¢è¨ã€Œå®¶äº‹åˆ†å·¥ï¼Œç„¡é—œæ€§åˆ¥ã€çš„ç†å¿µã€‚</p>
                <p><strong data-lang-key="info_p2_strong">ä½¿ç”¨å·¥å…·èˆ‡ç‰ˆæ¬Šè²æ˜ï¼š</strong><span data-lang-key="info_p2_span">æœ¬å°ˆæ¡ˆä½¿ç”¨ HTML, CSS, JavaScript è£½ä½œã€‚æ‰€æœ‰åœ–åƒå…§å®¹å‡ç‚ºé€šç”¨ Emoji ç¬¦è™Ÿï¼Œå­—é«”ä¾†è‡ª Google Fonts (DotGothic16)ï¼Œåœ¨åˆç†ä½¿ç”¨åŸå‰‡ä¸‹ç”¨æ–¼æœ¬æ¬¡éå•†æ¥­æ€§è³ªçš„ç«¶è³½å‰µä½œã€‚</span></p>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay" id="accessibility-modal" role="dialog" aria-modal="true" aria-labelledby="accessibility-title">
        <div class="modal-content">
            <h3 id="accessibility-title" class="modal-title">è¼”åŠ©ä½¿ç”¨åŠŸèƒ½ Accessibility</h3>
            <p>
                æœ¬ç¶²ç«™è‡´åŠ›æ–¼æä¾›å‹å–„çš„ç€è¦½é«”é©—ï¼Œä¸¦æ”¯æ´ä»¥ä¸‹è¼”åŠ©åŠŸèƒ½ï¼š<br>
                This site is committed to providing a friendly user experience and supports the following accessibility features:
            </p>
            <h4>é›™èªä»‹é¢ / Dual Language</h4>
            <p>æ‚¨å¯ä»¥åœ¨è¨­å®š(âš™ï¸)ä¸­åˆ‡æ›ã€Œç¹é«”ä¸­æ–‡ã€èˆ‡ã€ŒEnglishã€ä»‹é¢ã€‚<br>
               You can switch between "Traditional Chinese" and "English" in the Settings menu (âš™ï¸).
            </p>
            <h4>é¡¯ç¤ºæ¨¡å¼ / Display Modes</h4>
            <p>æä¾›ã€Œæ—¥é–“ã€ã€ã€Œå¤œé–“ã€èˆ‡ã€Œé«˜å°æ¯”è‰²ç›²ã€æ¨¡å¼ï¼Œå¯æ–¼è¨­å®šä¸­èª¿æ•´ã€‚<br>
               "Light", "Dark", and "High-Contrast Colorblind" modes are available in the settings.
            </p>
            <h4>å­—é«”ç¸®æ”¾ / Text Scaling</h4>
            <p>å¯è‡ªç”±æ”¾å¤§æˆ–ç¸®å°ç¶²ç«™å­—é«”ï¼Œæ–¹ä¾¿é–±è®€ã€‚<br>
               You can freely increase or decrease the text size for better readability.
            </p>
            <h4>ARIA èªæ„æ¨™ç±¤ / ARIA Friendly</h4>
            <p>ç¶²ç«™çµæ§‹æ”¯æ´è¢å¹•é–±è®€å™¨ï¼Œæå‡æ“ä½œä¾¿åˆ©æ€§ã€‚<br>
               The site structure supports screen readers to enhance usability.
            </p>
            <button class="modal-action-btn" id="close-accessibility-modal">äº†è§£ï¼Œé–‹å§‹éŠæˆ² (Got it, start the game)</button>
        </div>
    </div>

    <script>
        const SAVE_KEY_ACHIEVEMENTS = 'houseworkBattleAchievements';
        const SAVE_KEY_SETTINGS = 'houseworkBattleSettings';

        let currentLang = 'zh-Hant';
        let preColorblindTheme = 'light';

        const uiTranslations = {
            pageTitle: { "zh-Hant": "å®¶äº‹å¤§ä½œæˆ°", "en": "Housework Battle" },
            title: { "zh-Hant": "å®¶äº‹å¤§ä½œæˆ°", "en": "Housework Battle" },
            nav_main_game: { "zh-Hant": "ä¸»éŠæˆ²", "en": "Main Game" },
            nav_status: { "zh-Hant": "è§’è‰²ç‹€æ…‹", "en": "Status" },
            nav_achievements: { "zh-Hant": "æˆå°±ç³»çµ±", "en": "Achievements" },
            nav_worldview: { "zh-Hant": "ä¸–ç•Œè§€", "en": "Worldview" },
            settings_title: { "zh-Hant": "è¨­å®šä¸­å¿ƒ", "en": "Settings" },
            settings_language: { "zh-Hant": "èªè¨€ (Language)", "en": "èªè¨€ (Language)" },
            settings_theme: { "zh-Hant": "ä¸»é¡Œæ¨¡å¼", "en": "Theme Mode" },
            settings_theme_toggle_dark: { "zh-Hant": "åˆ‡æ›è‡³å¤œé–“æ¨¡å¼", "en": "Switch to Dark Mode" },
            settings_theme_toggle_light: { "zh-Hant": "åˆ‡æ›è‡³æ—¥é–“æ¨¡å¼", "en": "Switch to Light Mode" },
            settings_colorblind: { "zh-Hant": "è¼”åŠ©æ¨¡å¼", "en": "Accessibility Mode" },
            settings_colorblind_toggle_on: { "zh-Hant": "é–‹å•Ÿè‰²ç›²æ¨¡å¼", "en": "Enable Colorblind Mode" },
            settings_colorblind_toggle_off: { "zh-Hant": "é—œé–‰è‰²ç›²æ¨¡å¼", "en": "Disable Colorblind Mode" },
            settings_fontsize: { "zh-Hant": "å­—é«”å¤§å°", "en": "Font Size" },
            settings_progress: { "zh-Hant": "éŠæˆ²é€²åº¦", "en": "Game Progress" },
            settings_reset: { "zh-Hant": "æ¸…é™¤æ‰€æœ‰æˆå°±", "en": "Reset All Achievements" },
            info_title: { "zh-Hant": "é—œæ–¼æœ¬å°ˆæ¡ˆ", "en": "About This Project" },
            info_p1: { "zh-Hant": "æœ¬ä½œå“ç‚ºåƒåŠ è‡ºä¸­å¸‚æ”¿åºœç¤¾æœƒå±€ä¸»è¾¦ä¹‹ã€Œ2025æ€§åˆ¥å¤šåª’é«”å¾µé¸æ´»å‹•ã€æ‰€å‰µä½œã€‚ä¸»é¡Œç‚ºã€Œæ€§åˆ¥å…±å‰µâˆæ•¸ä½è—æƒ³ã€ï¼Œå¸Œæœ›é€éä¸€å€‹å……æ»¿y2kå¾©å¤éŠæˆ²é¢¨æ ¼çš„äº’å‹•æ•…äº‹ï¼Œæ¢è¨ã€Œå®¶äº‹åˆ†å·¥ï¼Œç„¡é—œæ€§åˆ¥ã€çš„ç†å¿µã€‚", "en": "This work was created for the '2025 Gender Multimedia Selection Event' hosted by the Taichung City Government's Social Affairs Bureau. The theme is 'Gender Co-creation âˆ Digital Artistry,' aiming to explore the concept of 'housework division is not about gender' through an interactive story with a Y2K retro game style." },
            info_p2_strong: { "zh-Hant": "ä½¿ç”¨å·¥å…·èˆ‡ç‰ˆæ¬Šè²æ˜ï¼š", "en": "Tools & Copyright:" },
            info_p2_span: { "zh-Hant": "æœ¬å°ˆæ¡ˆä½¿ç”¨ HTML, CSS, JavaScript è£½ä½œã€‚æ‰€æœ‰åœ–åƒå…§å®¹å‡ç‚ºé€šç”¨ Emoji ç¬¦è™Ÿï¼Œå­—é«”ä¾†è‡ª Google Fonts (DotGothic16)ï¼Œåœ¨åˆç†ä½¿ç”¨åŸå‰‡ä¸‹ç”¨æ–¼æœ¬æ¬¡éå•†æ¥­æ€§è³ªçš„ç«¶è³½å‰µä½œã€‚", "en": "This project was built with HTML, CSS, and JavaScript. All graphical content consists of universal Emoji symbols, and the font is from Google Fonts (DotGothic16), used under fair use principles for this non-commercial competition entry." },
            world_title: { "zh-Hant": "ğŸŒ ä¸–ç•Œè§€è¨­å®š", "en": "ğŸŒ World Setting" },
            world_p1: { "zh-Hant": "æ­¡è¿ä¾†åˆ°ã€Œç¾å¯¦2025è™Ÿã€å¹³è¡Œå®‡å®™ä¸–ç•Œï¼Œä¸€å€‹è¡¨é¢çœ‹ä¼¼å¹³å‡¡ï¼Œå¯¦å‰‡...éå¸¸å±éšªçš„åœ°æ–¹ã€‚", "en": "Welcome to the parallel universe of 'Reality 2025,' a world that appears ordinary on the surface but is, in fact... very dangerous." },
            world_p2: { "zh-Hant": "åœ¨é€™è£¡ï¼Œæ—¥å¸¸çš„å®¶å‹™è¢«ä¸€ç¨®ç¥ç§˜çš„å®‡å®™å°„ç·šã€Œæ‡¶æƒ°ç²’å­ã€æ‰€å½±éŸ¿ï¼Œå®ƒå€‘æœƒå¯¦é«”åŒ–æˆå„ç¨®è¢«ç¨±ç‚ºã€Œå®¶äº‹ç¸ã€çš„éº»ç…©å­˜åœ¨ã€‚", "en": "Here, daily chores are affected by a mysterious cosmic ray, the 'Laziness Particle,' which materializes into troublesome entities known as 'Chore Beasts.'" },
            world_p3: { "zh-Hant": "ä¾‹å¦‚ï¼Œå †ç©çš„ç¢—ç›¤æœƒèåˆæˆé»æ»‘çš„ã€Œæ²¹è†©å²èŠå§†ã€ï¼Œæ•£è½çš„è¡£ç‰©æœƒç³¾çºæˆã€Œæ£‰çµ®å·¨èŸ’ã€ï¼Œè€Œå¿˜è¨˜å€’çš„åƒåœ¾å‰‡æœƒå­•è‚²å‡ºæƒ¡è‡­çš„ã€Œè…æ•—å…ƒç´ ã€ã€‚", "en": "For example, piled-up dishes merge into a slimy 'Grease Slime,' scattered clothes tangle into a 'Lint Serpent,' and forgotten trash breeds a foul 'Rotten Element.'" },
            world_p4: { "zh-Hant": "ä½ å’Œä½ çš„ä¼´ä¾¶ï¼Œä½œç‚ºé€™å€‹å®¶çš„ã€Œé ˜åŸŸå®ˆè­·è€…ã€ï¼Œå¿…é ˆé‹ç”¨æ™ºæ…§ã€æºé€šå’Œå¶çˆ¾çš„å¿…æ®ºæŠ€ï¼ˆä¾‹å¦‚å«å¤–è³£ï¼‰ï¼Œä¾†æ·¨åŒ–é€™äº›å®¶äº‹ç¸ï¼Œç¶­è­·å…©äººå°å¤©åœ°çš„å’Œå¹³èˆ‡ç§©åºã€‚", "en": "You and your partner, as the 'Domain Guardians' of this home, must use wisdom, communication, and the occasional ultimate move (like ordering takeout) to purify these Chore Beasts and maintain peace and order in your small world." },
            world_p5: { "zh-Hant": "è¨˜ä½ï¼Œé€™ä¸æ˜¯ä¸€å ´æˆ°çˆ­ï¼Œæˆ°çˆ­æ°¸é æ²’æœ‰è´å®¶ã€‚ç¥ä½ å¥½é‹ï¼Œå‹‡è€…ï¼", "en": "Remember, this is not a war; there are no winners in war. Good luck, hero!" },
            status_relationship_title: { "zh-Hant": "ğŸ’– é—œä¿‚æº«åº¦è¨ˆ", "en": "ğŸ’– Relationship Meter" },
            status_relationship_desc: { "zh-Hant": "ä½ èˆ‡ä¼´ä¾¶çš„é—œä¿‚å’Œè«§åº¦ã€‚", "en": "The harmony of your relationship." },
            status_stress_title: { "zh-Hant": "ğŸ¤¯ å£“åŠ›æŒ‡æ•¸", "en": "ğŸ¤¯ Stress Index" },
            status_stress_desc: { "zh-Hant": "ä½ çš„ç²¾ç¥å£“åŠ›ï¼Œå¤ªé«˜æœƒå´©æ½°å–”ã€‚", "en": "Your mental stress. Too high and you'll break." },
            status_cleanliness_title: { "zh-Hant": "âœ¨ ç’°å¢ƒæ•´æ½”åº¦", "en": "âœ¨ Cleanliness Level" },
            status_cleanliness_desc: { "zh-Hant": "ä½ å€‘å°çª©çš„ä¹¾æ·¨ç¨‹åº¦ã€‚", "en": "The cleanliness of your home." },
            status_money_title: { "zh-Hant": "ğŸ’° å…±åŒåŸºé‡‘", "en": "ğŸ’° Shared Funds" },
            status_money_desc: { "zh-Hant": "å¯ä»¥ç”¨ä¾†è§£æ±ºå¾ˆå¤šå•é¡Œçš„ç¥å¥‡ç´™ç‰‡å’Œç¡¬å¹£ã€‚", "en": "Magical paper and coins that can solve many problems." },
            ach_unlocked_toast: { "zh-Hant": "æˆå°±è§£é–ï¼š", "en": "Achievement Unlocked: " },
            ach_locked_desc: { "zh-Hant": "ï¼Ÿï¼Ÿï¼Ÿ", "en": "???" },
            confirm_reset: { "zh-Hant": "ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æˆå°±å’Œå­˜æª”å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚", "en": "Are you sure you want to delete all achievements and saved data? This action cannot be undone." },
            reset_toast: { "zh-Hant": "é€²åº¦å·²æ¸…é™¤ï¼é é¢å°‡æœƒé‡æ–°æ•´ç†ã€‚", "en": "Progress cleared! The page will now refresh." },
        };
        
        const achievementsData = {
            START: { name: { "zh-Hant": 'åºå¹•æ‹‰é–‹', "en": 'The Curtain Rises' }, desc: { "zh-Hant": 'é–‹å§‹ä½ çš„å®¶äº‹å¤§ä½œæˆ°ã€‚', "en": 'Begin your housework battle.' }, icon: 'ğŸ¬' },
            COMMUNICATOR: { name: { "zh-Hant": 'æºé€šå¤§å¸«', "en": 'Master Communicator' }, desc: { "zh-Hant": 'æˆåŠŸé€éå°è©±è§£æ±ºç¬¬ä¸€æ¬¡å±æ©Ÿã€‚', "en": 'Successfully resolved the first crisis through dialogue.' }, icon: 'ğŸ’¬' },
            TEAMWORK: { name: { "zh-Hant": 'æœ€ä½³æ‹æª”', "en": 'Best Partners' }, desc: { "zh-Hant": 'èˆ‡ä¼´ä¾¶å®Œç¾åˆä½œï¼Œè§£æ±ºä¸€é …å®¶äº‹é›£é¡Œã€‚', "en": 'Worked perfectly with your partner to solve a chore problem.' }, icon: 'ğŸ¤' },
            SOLO_WARRIOR: { name: { "zh-Hant": 'å­¤ç¨çš„æ¸…æ½”å·¥', "en": 'The Lone Cleaner' }, desc: { "zh-Hant": 'ç¨è‡ªä¸€äººè§£æ±ºäº†æ‰€æœ‰å•é¡Œï¼Œæœ‰é»å¿ƒé…¸ã€‚', "en": 'You solved all the problems by yourself. It feels a bit lonely.' }, icon: 'ğŸ˜”' },
            TECH_GEEK: { name: { "zh-Hant": 'ç§‘æŠ€ä¿¡å¾’', "en": 'Tech Believer' }, desc: { "zh-Hant": 'æ±ºå®šä½¿ç”¨é‡‘éŒ¢ï¼ˆç§‘æŠ€ï¼‰çš„åŠ›é‡ã€‚', "en": 'Decided to use the power of money (technology).' }, icon: 'ğŸ¤–' },
            PROCRASTINATOR: { name: { "zh-Hant": 'æ‹–å»¶ç—‡ä¹‹ç‹', "en": 'King of Procrastination' }, desc: { "zh-Hant": 'æ±ºå®šæŠŠå•é¡Œç•™çµ¦æ˜å¤©ï¼Œä¸€ç¨®æ™ºæ…§ã€‚', "en": 'Decided to leave the problem for tomorrow. A kind of wisdom.' }, icon: 'â³' },
            NUCLEAR: { name: { "zh-Hant": 'æ ¸æˆ°çˆ­çˆ†ç™¼', "en": 'Nuclear War' }, desc: { "zh-Hant": 'å› å®¶äº‹å•é¡Œå¼•ç™¼äº†å²è©©ç´šçˆ­åµã€‚', "en": 'An epic argument was triggered by household chores.' }, icon: 'ğŸ’¥' },
            CHAOS_ORDER: { name: { "zh-Hant": 'æ··æ²Œç§©åº', "en": 'Chaotic Order' }, desc: { "zh-Hant": 'æ¥å—æ··äº‚ï¼Œä¸¦åœ¨å…¶ä¸­æ‰¾åˆ°äº†ç”Ÿæ´»çš„å¹³è¡¡ã€‚', "en": 'Embraced the chaos and found a balance in life within it.' }, icon: 'â˜¯ï¸' },
            PERFECT_ENDING: { name: { "zh-Hant": 'å®¶äº‹ä¹‹ç¥', "en": 'God of Housework' }, desc: { "zh-Hant": 'ä½ å€‘é”æˆäº†å®Œç¾çš„å®¶äº‹åˆ†å·¥èˆ‡å’Œè«§ã€‚', "en": 'You have achieved a perfect division of labor and harmony.' }, icon: 'ğŸ†' },
        };

        const storyNodesData = [
            {
                id: 1, image: 'ğŸ˜±',
                text: { "zh-Hant": 'çµæŸäº†æ¼«é•·çš„ä¸€å¤©ï¼Œä½ å›åˆ°å®¶ï¼ŒæœŸå¾…ä¸€å€‹æº«æš–çš„æ“æŠ±ã€‚ä½†ç¾å¯¦çµ¦äº†ä½ ä¸€è¨˜é‡æ‹³ï¼šå®¢å»³åƒæ˜¯è¢«å“ˆå£«å¥‡æ‹†é·éšŠæ´—åŠ«éã€‚ä½ çš„ä¼´ä¾¶P2æˆ´è‘—é™å™ªè€³æ©Ÿï¼Œåœ¨æ•¸ä½ä¸–ç•Œè£¡æ¿€æˆ°!', "en": 'After a long day, you get home expecting a warm hug. But reality hits you hard: the living room looks like it was ransacked by a team of huskies. Your partner, P2, is deep in a digital battle with noise-canceling headphones on!' },
                options: [
                    { text: { "zh-Hant": 'é¸é …A: æ·±å‘¼å¸ï¼Œå†·éœåœ°èµ°éå»ï¼Œè¼•æ‹P2çš„è‚©è†€ã€‚', "en": 'Option A: Take a deep breath, calmly walk over, and gently tap P2\'s shoulder.' }, nextId: 2, effects: { stress: -5 } },
                    { text: { "zh-Hant": 'é¸é …B: æ€’æ°£å€¼çªç ´å¤©éš›ï¼ã€Œä½ æ˜¯çäº†å—æ²’çœ‹åˆ°å®¶è£¡åƒè±¬çª©ï¼ã€', "en": 'Option B: Rage level over 9000! "Are you blind? Can\'t you see this place is a pigsty!"' }, nextId: 3, effects: { stress: +15, relationship: -10 } },
                    { text: { "zh-Hant": 'é¸é …C: é»˜é»˜æ‹¿èµ·æƒæŠŠï¼ŒåŒ–èº«æ‚²æƒ…è‹±é›„ï¼Œç”¨æ‰“æƒçš„å™ªéŸ³å¸å¼•æ³¨æ„ã€‚', "en": 'Option C: Silently pick up a broom, become a tragic hero, and use the sound of cleaning to get their attention.' }, nextId: 4, effects: { cleanliness: +10, stress: +5 } },
                    { text: { "zh-Hant": 'é¸é …D: æ”¾æ£„æ™æ‰ï¼ŒåŠ å…¥æ··äº‚ã€‚æŠŠåŒ…ä¸€æ‰”ï¼Œç™±åœ¨æ²™ç™¼ä¸Šæ»‘æ‰‹æ©Ÿã€‚', "en": 'Option D: Give up the struggle and join the chaos. Toss your bag and collapse on the sofa to scroll through your phone.' }, nextId: 5, effects: { stress: -10 }, achievement: 'PROCRASTINATOR' }
                ]
            },
            {
                id: 2, image: 'ğŸ’¬', text: { "zh-Hant": 'P2æ‘˜ä¸‹è€³æ©Ÿï¼Œã€Œæ€éº¼å•¦ï¼Ÿã€ä½ çœ‹è‘—å°æ–¹ç„¡è¾œçš„çœ¼ç¥ï¼Œæ±ºå®šç”¨èªè¨€çš„è—è¡“ä¾†åŒ–è§£é€™å ´å±æ©Ÿã€‚', "en": 'P2 takes off the headphones, "What\'s up?" You look at their innocent expression and decide to use the art of words to defuse the crisis.' },
                options: [
                    { text: { "zh-Hant": 'ã€Œè¦ªæ„›çš„ï¼Œæˆ‘å€‘çš„å°çª©å¥½åƒè¢«é­”ç‰©å…¥ä¾µäº†ï¼Œéœ€è¦å…©ä½å‹‡è€…è¯æ‰‹æ·¨åŒ–ï¼ã€', "en": '"Honey, it looks like our little nest has been invaded by monsters. It needs two heroes to cleanse it!"' }, nextId: 6, effects: { relationship: +5 }, achievement: 'COMMUNICATOR' },
                    { text: { "zh-Hant": 'ã€Œæˆ‘ä»Šå¤©å¥½ç´¯å–”...çœ‹åˆ°å®¶è£¡é€™æ¨£ï¼Œå¿ƒæƒ…æœ‰é»...å—šå—šå—šã€', "en": '"I\'m so tired today... Seeing the house like this makes me feel... sniffle..."' }, nextId: 7, effects: { relationship: +3 } },
                    { text: { "zh-Hant": 'ã€Œæˆ‘å€‘ä¾†è¨‚å€‹è¦å‰‡å§ï¼Œæ¯å¤©ç©éŠæˆ²å‰ï¼ŒèŠ±15åˆ†é˜å¿«é€Ÿæ•´ç†ä¸€ä¸‹å¦‚ä½•ï¼Ÿã€', "en": '"Let\'s make a rule. How about we spend 15 minutes tidying up before gaming every day?"' }, nextId: 8, effects: { relationship: +2, cleanliness: +5 } }
                ]
            },
            {
                id: 3, image: 'ğŸ’¥', text: { "zh-Hant": 'ä½ çš„æ€’å¼æˆåŠŸé»ç‡ƒäº†æˆ°ç«ã€‚P2ä¹Ÿç«äº†ï¼šã€Œæˆ‘ä¸Šäº†ä¸€æ•´å¤©ç­ï¼Œç©ä¸€ä¸‹éŠæˆ²æ€éº¼äº†ï¼Ÿä½ å°±ä¸èƒ½å…ˆæ”¶ä¸€ä¸‹å—ï¼Ÿã€ç©ºæ°£ä¸­å……æ»¿äº†æš´æ€’çš„å‘³é“ã€‚', "en": 'Your roar successfully ignited the flames of war. P2 fires back: "I worked all day, what\'s wrong with playing a game? Couldn\'t you have just started cleaning?" The air is thick with rage.' },
                options: [
                    { text: { "zh-Hant": 'ã€Œæˆ‘ä¸Šäº†ä¸€å¤©ç­å›ä¾†é‚„è¦çµ¦ä½ æ”¶æ‹¾çˆ›æ”¤å­ï¼Ÿã€æˆ°çˆ­å‡ç´šï¼', "en": '"I worked all day too, and I have to come home to clean up your mess?" The war escalates!' }, nextId: 100, effects: { relationship: -15, stress: +20 }, achievement: 'NUCLEAR'},
                    { text: { "zh-Hant": 'æ„è­˜åˆ°é€™æ¨£ä¸‹å»ä¸è¡Œï¼Œå¼·è¿«è‡ªå·±å†·éœï¼šã€ŒæŠ±æ­‰ï¼Œæˆ‘å¤ªç´¯äº†ï¼Œèªæ°£ä¸å¥½ã€‚ä½†æˆ‘å€‘éœ€è¦è«‡è«‡ã€‚ã€', "en": 'Realizing this is going nowhere, you force yourself to calm down: "Sorry, I\'m just tired and my tone was bad. But we need to talk."' }, nextId: 2, effects: { stress: -10, relationship: +5 } },
                    { text: { "zh-Hant": 'ï¼ˆæ‘”é–€é€²æˆ¿ï¼‰å†·æˆ°é–‹å§‹äº†ã€‚', "en": '(Slam the door and go to the bedroom) The cold war begins.' }, nextId: 101, effects: { relationship: -10, stress: +10 } }
                ]
            },
            {
                id: 4, image: 'ğŸ§¹', text: { "zh-Hant": 'ä½ ç„¡è²åœ°æ‰“æƒè‘—ï¼ŒæƒæŠŠèˆ‡åœ°æ¿çš„æ‘©æ“¦è²è­œå¯«è‘—ä¸€é¦–æ€¨å¿µçš„è©©ã€‚åŠå°æ™‚å¾Œï¼ŒP2çµ‚æ–¼æ³¨æ„åˆ°ï¼Œå°·å°¬åœ°èªªï¼šã€Œå•Šï¼Œå°ä¸èµ·æˆ‘ä¾†å¹«å¿™...ã€', "en": 'You clean silently, the sound of the broom against the floor composing a resentful poem. Half an hour later, P2 finally notices and says awkwardly, "Oh, sorry, let me help..."' },
                options: [
                    { text: { "zh-Hant": 'ã€Œæ²’äº‹ï¼Œæˆ‘ä¾†å°±å¥½ã€‚ã€ï¼ˆå…§å¿ƒæˆ²ï¼šå°ï¼Œè¨˜ä½é€™ä»½æ„§ç–šå§ï¼ï¼‰', "en": '"It\'s fine, I\'ll do it." (Internal monologue: Yes, remember this guilt!)' }, nextId: 102, effects: { cleanliness: +15, relationship: -2 }, achievement: 'SOLO_WARRIOR' },
                    { text: { "zh-Hant": 'ã€Œå¥½å•Šï¼Œé‚£ä½ å»æŠŠå»šæˆ¿çš„ã€æ²¹è†©å²èŠå§†ã€è™•ç†æ‰ã€‚ã€', "en": '"Okay, then you go deal with the \'Grease Slime\' in the kitchen."' }, nextId: 9, effects: { cleanliness: +10, relationship: +2 } }
                ]
            },
            {
                id: 5, image: 'ğŸ§˜', text: { "zh-Hant": 'ä½ æ±ºå®šèˆ‡æ··äº‚å…±å­˜ã€‚æ²™ç™¼çš„ä¸€è§’é‚„ç®—ä¹¾æ·¨ï¼Œä½ ç¸®åœ¨é‚£è£¡ï¼Œé€²å…¥äº†å‹¿æ“¾è³¢è€…æ™‚é–“ã€‚P2æ‰“å®Œä¸€å±€éŠæˆ²ï¼Œçœ‹åˆ°ä½ ä¹Ÿå¦‚æ­¤â€œæ”¾é¬†â€ï¼Œä¼¸äº†å€‹æ‡¶è…°èªªï¼šã€Œæ™šé»å†ä¸€èµ·æ”¶å§ï¼Ÿã€', "en": 'You decide to coexist with the chaos. A corner of the sofa is clean enough, so you curl up there and enter a state of zen. After a match, P2 sees you looking so "relaxed," stretches, and says, "Let\'s clean up together later?"' },
                options: [
                    { text: { "zh-Hant": 'ã€Œå¥½å•Šï¼Œå…ˆå«å€‹å¤–è³£è£œå……é«”åŠ›ã€‚ã€', "en": '"Sure, let\'s order takeout to recharge first."' }, nextId: 103, effects: { relationship: +5, cleanliness: -5, money: -20 }, achievement: 'CHAOS_ORDER' },
                    { text: { "zh-Hant": 'ã€Œä¸äº†ï¼Œæˆ‘æ°¸é éƒ½ä¸æƒ³æ”¶äº†ã€‚ã€ï¼ˆé€²å…¥é ¹å»¢æ¨¡å¼ï¼‰', "en": '"No, I never want to clean again." (Enters degenerate mode)' }, nextId: 104, effects: { relationship: -5, cleanliness: -10 } }
                ]
            },
            {
                id: 6, image: 'ğŸ¤', text: { "zh-Hant": 'P2è¢«ä½ é€—ç¬‘äº†ï¼Œã€Œéµå‘½ï¼Œæˆ‘çš„éšŠé•·ï¼é‚£...ã€ç¢—ç›¤å²èŠå§†ã€å’Œã€è¡£ç‰©å·¨èŸ’ã€ï¼Œæˆ‘å€‘å…ˆè¨ä¼å“ªå€‹ï¼Ÿã€ä½ å€‘å–œæä¸€å ´æœ‰è¶£çš„å†’éšªã€‚', "en": 'P2 chuckles, "Yes, my captain! So... the \'Dish Slime\' or the \'Laundry Serpent,\' which shall we vanquish first?" You\'ve just started a fun adventure.' },
                options: [
                    { text: { "zh-Hant": 'ã€Œåˆ†é ­è¡Œå‹•ï¼æˆ‘å»è¨ä¼å²èŠå§†ï¼Œä½ å»é¦´æœå·¨èŸ’ï¼ã€', "en": '"Let\'s split up! I\'ll slay the Slime, you tame the Serpent!"' }, nextId: 10, effects: { cleanliness: +20, relationship: +10 }, achievement: 'TEAMWORK' }
                ]
            },
            {
                id: 7, image: 'ğŸ˜¢', text: { "zh-Hant": 'P2çœ‹åˆ°ä½ å¤±è½çš„æ¨£å­ï¼Œå¿ƒè£¡ä¸€æªï¼Œç«‹åˆ»æ”¾ä¸‹æ§åˆ¶å™¨ï¼šã€Œå¯¶è²å°ä¸èµ·ï¼Œæ˜¯æˆ‘çš„éŒ¯ï¼Œä¸è©²é€™éº¼æ²’ç¥ç¶“ã€‚æˆ‘é¦¬ä¸Šæ”¶æ‹¾ï¼ã€', "en": 'Seeing your disappointed face, P2 feels a pang of guilt and immediately puts down the controller: "Honey, I\'m so sorry, it\'s my fault. I was being thoughtless. I\'ll clean up right now!"' },
                options: [
                    { text: { "zh-Hant": 'ã€Œæˆ‘å€‘ä¸€èµ·å§ï¼Œé€™æ¨£æ¯”è¼ƒå¿«ã€‚ã€', "en": '"Let\'s do it together, it\'ll be faster."' }, nextId: 10, effects: { cleanliness: +20, relationship: +10 }, achievement: 'TEAMWORK' },
                    { text: { "zh-Hant": 'ï¼ˆæŠ±ä½å°æ–¹ï¼‰ã€Œæ²’é—œä¿‚ï¼Œæˆ‘ä¹Ÿåªæ˜¯éœ€è¦ä½ çš„é—œå¿ƒã€‚ã€', "en": '(Hug them) "It\'s okay. I just needed to feel you care."' }, nextId: 10, effects: { relationship: +15 } }
                ]
            },
            {
                id: 8, image: 'ğŸ“œ', text: { "zh-Hant": 'P2æƒ³äº†æƒ³ï¼Œé»é»é ­ï¼šã€Œè½èµ·ä¾†å¾ˆå…¬å¹³ã€‚å°±åƒéŠæˆ²çš„æ¯æ—¥ä»»å‹™ä¸€æ¨£ï¼Œå®Œæˆé‚„æœ‰çå‹µï¼ˆä¾‹å¦‚è¦ªè¦ªï¼‰ã€‚æˆäº¤ï¼ã€ä½ å€‘å»ºç«‹äº†ä¸€å¥—å±¬æ–¼è‡ªå·±çš„å®¶äº‹å…¬ç´„ã€‚', "en": 'P2 thinks for a moment and nods: "That sounds fair. Like a daily quest in a game, with rewards for completion (like kisses). Deal!" You establish your own housework pact.' },
                options: [
                    { text: { "zh-Hant": 'å¥½è€¶ï¼ä½ å€‘çš„æºé€šèˆ‡åˆä½œé€²å…¥äº†æ–°ç´€å…ƒï¼', "en": 'Hooray! Your communication and cooperation have entered a new era!' }, nextId: 200, effects: { cleanliness: +15, relationship: +15, stress: -15 }, achievement: 'PERFECT_ENDING' }
                ]
            },
            {
                id: 9, image: 'âš”ï¸', text: { "zh-Hant": 'P2æ¥ä¸‹ä»»å‹™ï¼Œå‰å¾€å»šæˆ¿ã€‚ä¸€æœƒå…’å‚³ä¾†é©šå‘¼ï¼šã€Œå¤©å•Šï¼é€™è£¡çš„bosså¥½å¼·ï¼æˆ‘éœ€è¦æ”¯æ´ï¼ã€çœ‹ä¾†æˆ°æ³æ¿€çƒˆã€‚', "en": 'P2 accepts the quest and heads to the kitchen. A moment later, you hear a cry: "Oh my god! The boss in here is tough! I need backup!" The battle seems intense.' },
                options: [
                    { text: { "zh-Hant": 'ã€Œå‹‡è€…ï¼Œæ’ä½ï¼æˆ‘ä¾†äº†ï¼ã€ï¼ˆåŠ å…¥æˆ°é¬¥ï¼‰', "en": '"Hold on, hero! I\'m coming!" (Join the battle)' }, nextId: 10, effects: { cleanliness: +20, relationship: +10 }, achievement: 'TEAMWORK' },
                    { text: { "zh-Hant": 'ã€Œä½ å¯ä»¥çš„ï¼ç›¸ä¿¡è‡ªå·±ï¼æˆ‘åœ¨ç²¾ç¥ä¸Šæ”¯æŒä½ ï¼ã€ï¼ˆç¹¼çºŒæ‰“æƒå®¢å»³ï¼‰', "en": '"You can do it! I believe in you! I\'m with you in spirit!" (Continue cleaning the living room)' }, nextId: 102, effects: { cleanliness: +10, relationship: -2 }, achievement: 'SOLO_WARRIOR' }
                ]
            },
            {
                id: 10, image: 'âœ¨', text: { "zh-Hant": 'åœ¨å…©äººçš„åˆä½œä¸‹ï¼Œå®¶å¾ˆå¿«å°±æ¢å¾©äº†æ•´æ½”ã€‚ä½ å€‘ååœ¨ä¹¾æ·¨çš„æ²™ç™¼ä¸Šï¼Œé›–ç„¶æœ‰é»ç´¯ï¼Œä½†å¿ƒè£¡å¾ˆæ»¿è¶³ã€‚', "en": 'With both of you working together, the house quickly becomes tidy again. You sit on the clean sofa, a bit tired but very satisfied.' },
                 options: [
                    { text: { "zh-Hant": 'ã€Œçœ‹ï¼Œæˆ‘å€‘åˆä½œèµ·ä¾†å¤šå²å®³ï¼ã€', "en": '"Look how amazing we are when we work together!"' }, nextId: 11, effects: { relationship: +5 } },
                    { text: { "zh-Hant": 'ã€Œç‚ºäº†æ…¶ç¥å‹åˆ©ï¼Œæˆ‘å€‘ä¾†é»çå‹µå§ï¼Ÿã€', "en": '"To celebrate our victory, how about a little reward?"' }, nextId: 11, effects: { relationship: +5 } }
                ]
            },
             {
                id: 11, image: 'ğŸ¤–', text: { "zh-Hant": 'P2çªç„¶èªªï¼šã€ŒèªªçœŸçš„ï¼Œæˆ‘å€‘æ˜¯ä¸æ˜¯è©²è€ƒæ…®ä¸€ä¸‹ã€ç§‘æŠ€çš„åŠ›é‡ã€ï¼Ÿã€å°æ–¹æ‰“é–‹æ‰‹æ©Ÿè³¼ç‰©APPï¼Œé é¢ä¸Šæ˜¯å„ç¨®æƒåœ°æ©Ÿå™¨äººã€æ´—ç¢—æ©Ÿ...', "en": 'P2 suddenly says: "Seriously, maybe we should consider the \'power of technology\'?" They open a shopping app, showing various robot vacuums, dishwashers...' },
                 options: [
                    { text: { "zh-Hant": 'ã€Œå¥½ä¸»æ„ï¼æŠŠå°ˆæ¥­çš„äº‹äº¤çµ¦å°ˆæ¥­çš„æ©Ÿå™¨ï¼ã€', "en": '"Great idea! Let the professional machines do the professional work!"' }, nextId: 12, effects: { money: -100 }, achievement: 'TECH_GEEK' },
                    { text: { "zh-Hant": 'ã€Œå—¯...é€™æ˜¯ä¸€ç­†ä¸å°çš„é–‹éŠ·ï¼Œæˆ‘å€‘å…ˆæ‰‹å‹•å …æŒä¸€ä¸‹ï¼Ÿã€', "en": '"Hmm... that\'s a big expense. Maybe we should stick to manual labor for now?"' }, nextId: 200, effects: { money: 0 } },
                    { text: { "zh-Hant": 'ã€Œä½ æ˜¯ä¸æ˜¯å°±æƒ³å·æ‡¶ï¼ã€', "en": '"Are you just trying to be lazy!"' }, nextId: 3, effects: { relationship: -5 } }
                ]
            },
            {
                id: 12, image: 'ğŸ’¸', text: { "zh-Hant": 'ä½ å€‘ç²¾æŒ‘ç´°é¸ï¼Œä¸‹å–®äº†ä¸€å¥—å®¶äº‹è¼”åŠ©æ©Ÿå™¨äººã€‚å¹¾å¤©å¾Œï¼Œä¸€å€‹åœ“æ»¾æ»¾çš„æƒåœ°æ©Ÿå™¨äººå’Œä¸€å€‹æ–¹æ­£çš„æ´—ç¢—æ©ŸåŠ å…¥äº†ä½ å€‘çš„å®¶åº­ã€‚', "en": 'After careful consideration, you order a set of chore-bots. A few days later, a round robot vacuum and a square dishwasher join your family.' },
                 options: [
                    { text: { "zh-Hant": 'å¾æ­¤éä¸Šäº†å¹¸ç¦å¿«æ¨‚çš„ç”Ÿæ´»...å—ï¼Ÿ', "en": 'And they lived happily ever after... or did they?' }, nextId: 200, effects: { cleanliness: +30, stress: -20 } , achievement: 'PERFECT_ENDING' }
                ]
            },
            { id: 100, image: 'ğŸ’”', text: { "zh-Hant": 'çˆ­åµç„¡æ³•è§£æ±ºä»»ä½•å•é¡Œï¼Œåªæœƒç•™ä¸‹å‚·å®³ã€‚ä½ å€‘ä¹‹é–“çš„é—œä¿‚æº«åº¦é™åˆ°äº†å†°é»ã€‚<br><br><b>ã€çµå±€ï¼šå®¶åº­å†·æˆ°ã€‘</b><br>æˆ¿å­ä¾ç„¶æ··äº‚ï¼Œä½†æ›´äº‚çš„æ˜¯ä½ å€‘çš„å¿ƒã€‚', "en": 'Arguments solve nothing and only leave scars. The temperature of your relationship has dropped to freezing.<br><br><b>[Ending: Domestic Cold War]</b><br>The house is still a mess, but your hearts are even messier.' }, options: [{ text: { "zh-Hant": 'é‡æ–°è®€æª”...', "en": 'Reload Save...' }, nextId: -1 }] },
            { id: 101, image: 'â„ï¸', text: { "zh-Hant": 'æ²‰é»˜æ˜¯æ­¤åˆ»æœ€å‚·äººçš„æ­¦å™¨ã€‚ä½ å€‘å¾…åœ¨åŒä¸€å€‹ç©ºé–“ï¼Œå»åƒéš”è‘—å…©å€‹ä¸–ç•Œã€‚<br><br><b>ã€çµå±€ï¼šæ²‰é»˜çš„è·é›¢ã€‘</b><br>å®¶äº‹å•é¡Œè¢«æ“±ç½®ï¼Œä½†ä¸€å€‹æ›´å¤§çš„è£‚ç—•å‡ºç¾äº†ã€‚', "en": 'Silence is the most hurtful weapon right now. You share the same space but feel worlds apart.<br><br><b>[Ending: The Silent Distance]</b><br>The chore problem is ignored, but a much larger crack has appeared.' }, options: [{ text: { "zh-Hant": 'å›åˆ°æŠ‰æ“‡é»...', "en": 'Return to choice...' }, nextId: -1 }] },
            { id: 102, image: 'ğŸ˜¥', text: { "zh-Hant": 'ä½ ä¸€å€‹äººé»˜é»˜åœ°æŠŠæ‰€æœ‰äº‹æƒ…éƒ½åšå®Œäº†ã€‚P2é›–ç„¶èªªäº†è¬è¬ï¼Œä½†ä½ æ„Ÿè¦ºè‡ªå·±æ›´åƒä¸€å€‹å®¤å‹ï¼Œè€Œä¸æ˜¯ä¼´ä¾¶ã€‚<br><br><b>ã€çµå±€ï¼šç›¡è²¬çš„å®¤å‹ã€‘</b><br>å®¶è®Šä¹¾æ·¨äº†ï¼Œä½†å¿ƒçš„è·é›¢å»è®Šé äº†ã€‚', "en": 'You silently did everything by yourself. P2 said thanks, but you feel more like a roommate than a partner.<br><br><b>[Ending: The Dutiful Roommate]</b><br>The house is clean, but the distance between your hearts has grown.' }, options: [{ text: { "zh-Hant": 'å†è©¦ä¸€æ¬¡...', "en": 'Try again...' }, nextId: -1 }] },
            { id: 103, image: 'ğŸ•', text: { "zh-Hant": 'ä½ å€‘åœ¨æ··äº‚ä¸­é”æˆäº†å¥‡å¦™çš„å…±è­˜ï¼šåªè¦çœ‹ä¸ä¸‹å»çš„äººå»æ”¶æ‹¾å°±å¥½ã€‚å¤–è³£ç›’å †å¾—æ¯”è¡£æœå±±é‚„é«˜ã€‚<br><br><b>ã€çµå±€ï¼šæ··æ²Œå…±ç”Ÿã€‘</b><br>èª°èªªå®¶ä¸€å®šè¦ä¸€å¡µä¸æŸ“ï¼Ÿä½ å€‘æ‰¾åˆ°äº†å±¬æ–¼è‡ªå·±çš„ï¼Œæœ‰é»â€œé‚‹é¢â€çš„å¹¸ç¦ã€‚', "en": 'You\'ve reached a strange consensus amidst the chaos: whoever can\'t stand it anymore is the one who cleans. The pile of takeout boxes is taller than the mountain of clothes.<br><br><b>[Ending: Symbiotic Chaos]</b><br>Who says a home has to be spotless? You\'ve found your own, slightly messy, brand of happiness.' }, options: [{ text: { "zh-Hant": 'é–‹å•ŸäºŒå‘¨ç›®...', "en": 'New Game+...' }, nextId: -1 }] },
            { id: 104, image: 'ğŸ’€', text: { "zh-Hant": 'ä½ å€‘å¾¹åº•æ”¾æ£„äº†æ²»ç™‚ã€‚å®¶è£¡çš„â€œå®¶äº‹ç¸â€å€‘é–‹å§‹ç¨±ç‹ç¨±éœ¸ï¼Œç”šè‡³æ¼”åŒ–å‡ºäº†è‡ªå·±çš„æ–‡æ˜ã€‚<br><br><b>ã€çµå±€ï¼šè¢«å®¶äº‹ç¸çµ±æ²»ã€‘</b><br>æœ‰ä¸€å¤©ï¼Œä½ åœ¨è¥ªå­å †è£¡ç™¼ç¾äº†ä¸€å¼µå®ƒå€‘å¯«çš„ç¨ç«‹å®£è¨€ã€‚', "en": 'You\'ve completely given up. The "Chore Beasts" in your home have started to rule the place, even evolving their own civilization.<br><br><b>[Ending: Ruled by Chore Beasts]</b><br>One day, you find a declaration of independence written by them in a pile of socks.' }, options: [{ text: { "zh-Hant": 'é‡å•Ÿå®‡å®™...', "en": 'Restart Universe...' }, nextId: -1 }] },
            { id: 200, image: 'ğŸ’–', text: { "zh-Hant": 'ç„¡è«–æ˜¯é€éæºé€šã€åˆä½œé‚„æ˜¯ç§‘æŠ€ï¼Œä½ å€‘æœ€çµ‚æ‰¾åˆ°äº†æœ€é©åˆå½¼æ­¤çš„ç›¸è™•æ¨¡å¼ã€‚å®¶ä¸å†æ˜¯æˆ°å ´ï¼Œè€Œæ˜¯å…±åŒç¶“ç‡Ÿçš„æ„›å·¢ã€‚<br><br><b>ã€å®Œç¾çµå±€ï¼šæ„›å·¢åˆå¤¥äººã€‘</b><br>æ­å–œï¼ä½ å€‘ä¸åƒ…æ¸…ç†äº†ä¸€é–“æˆ¿å­ï¼Œæ›´æ˜¯å»ºç«‹äº†ä¸€å€‹å®¶ã€‚', "en": 'Whether through communication, cooperation, or technology, you finally found a way of living together that suits you both. Home is no longer a battlefield, but a love nest you build together.<br><br><b>[Perfect Ending: Love Nest Partners]</b><br>Congratulations! You didn\'t just clean a house, you built a home.' }, options: [{ text: { "zh-Hant": 'æŒ‘æˆ°æ›´å¤šå¯èƒ½ï¼', "en": 'Challenge other possibilities!' }, nextId: -1 }] }
        ];

        const appState = {
            gameState: {},
            achievements: {}
        };

        function setLanguage(lang, initialLoad = false) {
            currentLang = lang;
            document.documentElement.lang = lang;
            
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.dataset.langKey;
                if (uiTranslations[key] && uiTranslations[key][lang]) {
                    el.innerHTML = uiTranslations[key][lang];
                }
            });

            const langBtn = document.getElementById('language-toggle-btn');
            if (lang === 'en') {
                langBtn.textContent = 'ç¹é«”ä¸­æ–‡';
            } else {
                langBtn.textContent = 'English';
            }
            
            if (!initialLoad) {
                const currentSceneId = appState.gameState.currentSceneId || 1;
                showScene(currentSceneId); 
                updateStatusPage();
                updateAchievementsPage();
            }

            saveSettings();
        }

        function saveSettings() {
             try {
                const settings = {
                    lang: currentLang,
                    theme: document.body.dataset.theme,
                    fontSize: currentFontSize
                };
                localStorage.setItem(SAVE_KEY_SETTINGS, JSON.stringify(settings));
            } catch (e) {
                console.error("Failed to save settings:", e);
            }
        }

        function loadSettings() {
            try {
                const savedSettings = localStorage.getItem(SAVE_KEY_SETTINGS);
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    
                    preColorblindTheme = (settings.theme === 'light' || settings.theme === 'dark') ? settings.theme : 'light';
                    document.body.dataset.theme = settings.theme;
                    updateThemeButtons(settings.theme);

                    currentFontSize = settings.fontSize || 16;
                    document.documentElement.style.setProperty('--font-size-base', `${currentFontSize}px`);

                    setLanguage(settings.lang || 'zh-Hant', true);
                } else {
                    setLanguage('zh-Hant', true);
                }
            } catch (e) {
                console.error("Failed to load settings:", e);
                setLanguage('zh-Hant', true);
            }
        }

        function saveAchievements() {
            try {
                const achievementsToSave = {};
                for (const key in appState.achievements) {
                    achievementsToSave[key] = { unlocked: appState.achievements[key].unlocked };
                }
                localStorage.setItem(SAVE_KEY_ACHIEVEMENTS, JSON.stringify(achievementsToSave));
            } catch (e) {
                console.error("Failed to save achievements:", e);
            }
        }

        function loadAchievements() {
            try {
                for (const key in achievementsData) {
                    appState.achievements[key] = { ...achievementsData[key], unlocked: false };
                }

                const savedData = localStorage.getItem(SAVE_KEY_ACHIEVEMENTS);
                if (savedData) {
                    const unlockedStatus = JSON.parse(savedData);
                    for (const key in unlockedStatus) {
                        if (appState.achievements[key]) {
                            appState.achievements[key].unlocked = unlockedStatus[key].unlocked;
                        }
                    }
                }
            } catch (e) {
                console.error("Failed to load achievements:", e);
            }
        }

        function initializeGame() {
            appState.gameState = {
                relationship: 50,
                stress: 20,
                cleanliness: 30,
                money: 100,
                day: 1,
                currentSceneId: 1
            };
            unlockAchievement('START');
            showScene(1);
            updateStatusPage();
            updateAchievementsPage();
        }

        function showScene(sceneId) {
            const sceneData = storyNodesData.find(node => node.id === sceneId);
            if (!sceneData) return;

            appState.gameState.currentSceneId = sceneId;
            document.getElementById('scene-image').textContent = sceneData.image;
            document.getElementById('dialogue-box').innerHTML = sceneData.text[currentLang];

            const optionsBox = document.getElementById('options-box');
            optionsBox.innerHTML = '';

            if (sceneData.options) {
                sceneData.options.forEach(optionData => {
                    const button = document.createElement('button');
                    button.innerText = optionData.text[currentLang];
                    button.classList.add('option-btn');
                    button.addEventListener('click', () => selectOption(optionData));
                    optionsBox.appendChild(button);
                });
            }
        }

        function selectOption(option) {
            if (option.effects) {
                for (const key in option.effects) {
                    appState.gameState[key] += option.effects[key];
                    if (appState.gameState[key] > 100) appState.gameState[key] = 100;
                    if (appState.gameState[key] < 0) appState.gameState[key] = 0;
                }
            }
            if(option.achievement) {
                unlockAchievement(option.achievement);
            }
            
            const nextSceneId = option.nextId;
            if (nextSceneId <= 0) {
                return initializeGame();
            }
            updateStatusPage();
            showScene(nextSceneId);
        }

        function unlockAchievement(key) {
            if (appState.achievements[key] && !appState.achievements[key].unlocked) {
                appState.achievements[key].unlocked = true;
                const toastMsg = uiTranslations.ach_unlocked_toast[currentLang] + appState.achievements[key].name[currentLang];
                showToast(toastMsg);
                updateAchievementsPage();
                saveAchievements();
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.setAttribute('role', 'alert');
            toast.style.position = 'fixed';
            toast.style.fontFamily = "'DotGothic16', sans-serif";
            toast.style.bottom = '20px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = 'var(--accent-bg-color)';
            toast.style.color = 'var(--btn-active-text-color)';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '0px';
            toast.style.zIndex = '2000';
            toast.style.border = '3px solid var(--border-color)';
            toast.style.boxShadow = '4px 4px 0 var(--shadow-color)';
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function updateStatusPage() {
            const container = document.getElementById('status-grid-content');
            const gs = appState.gameState;
            container.innerHTML = `
                <div class="card">
                    <h3>${uiTranslations.status_relationship_title[currentLang]}</h3>
                    <p>${uiTranslations.status_relationship_desc[currentLang]}</p>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${gs.relationship}" aria-valuemin="0" aria-valuemax="100"><div class="progress-bar-inner" style="width: ${gs.relationship}%;"></div></div>
                    <span>${gs.relationship} / 100</span>
                </div>
                <div class="card">
                    <h3>${uiTranslations.status_stress_title[currentLang]}</h3>
                    <p>${uiTranslations.status_stress_desc[currentLang]}</p>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${gs.stress}" aria-valuemin="0" aria-valuemax="100"><div class="progress-bar-inner" style="width: ${gs.stress}%;"></div></div>
                    <span>${gs.stress} / 100</span>
                </div>
                <div class="card">
                    <h3>${uiTranslations.status_cleanliness_title[currentLang]}</h3>
                    <p>${uiTranslations.status_cleanliness_desc[currentLang]}</p>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${gs.cleanliness}" aria-valuemin="0" aria-valuemax="100"><div class="progress-bar-inner" style="width: ${gs.cleanliness}%;"></div></div>
                    <span>${gs.cleanliness} / 100</span>
                </div>
                 <div class="card">
                    <h3>${uiTranslations.status_money_title[currentLang]}</h3>
                    <p>${uiTranslations.status_money_desc[currentLang]}</p>
                     <h3>${gs.money}</h3>
                </div>
            `;
        }

        function updateAchievementsPage() {
            const container = document.getElementById('achievement-grid-content');
            container.innerHTML = '';
            for (const key in appState.achievements) {
                const ach = appState.achievements[key];
                const card = document.createElement('div');
                card.className = `card achievement ${ach.unlocked ? 'unlocked' : ''}`;
                card.innerHTML = `
                    <h3>${ach.icon} ${ach.name[currentLang]}</h3>
                    <p>${ach.unlocked ? ach.desc[currentLang] : uiTranslations.ach_locked_desc[currentLang]}</p>
                `;
                container.appendChild(card);
            }
        }

        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.nav-btn.active').classList.remove('active');
                btn.classList.add('active');
                
                const activeView = document.querySelector('.view.active');
                activeView.classList.remove('active');
                activeView.setAttribute('aria-hidden', 'true');
                
                const newView = document.getElementById(btn.dataset.view);
                newView.classList.add('active');
                newView.setAttribute('aria-hidden', 'false');
            });
        });

        document.getElementById('settings-btn').addEventListener('click', () => document.getElementById('settings-modal').classList.add('show'));
        document.getElementById('info-btn').addEventListener('click', () => document.getElementById('info-modal').classList.add('show'));
        
        document.querySelectorAll('.close-modal').forEach(btn => {
            btn.addEventListener('click', () => document.getElementById(btn.dataset.modal).classList.remove('show'));
        });
        
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('show');
            });
        });
        
        document.getElementById('language-toggle-btn').addEventListener('click', () => {
            const newLang = currentLang === 'zh-Hant' ? 'en' : 'zh-Hant';
            setLanguage(newLang);
        });

        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        themeToggleBtn.addEventListener('click', () => {
            const currentTheme = document.body.dataset.theme;
            let newTheme;
            if (currentTheme === 'light') {
                newTheme = 'dark';
            } else {
                newTheme = 'light';
            }
            document.body.dataset.theme = newTheme;
            preColorblindTheme = newTheme;
            updateThemeButtons(newTheme);
            saveSettings();
        });

        const colorblindToggleBtn = document.getElementById('colorblind-toggle-btn');
        colorblindToggleBtn.addEventListener('click', () => {
            const currentTheme = document.body.dataset.theme;
            let newTheme;
            if (currentTheme === 'colorblind') {
                newTheme = preColorblindTheme;
            } else {
                preColorblindTheme = currentTheme;
                newTheme = 'colorblind';
            }
            document.body.dataset.theme = newTheme;
            updateThemeButtons(newTheme);
            saveSettings();
        });
        
        function updateThemeButtons(theme) {
            if (theme === 'colorblind') {
                colorblindToggleBtn.dataset.langKey = 'settings_colorblind_toggle_off';
                colorblindToggleBtn.innerText = uiTranslations.settings_colorblind_toggle_off[currentLang];
                themeToggleBtn.style.display = 'none';
            } else {
                colorblindToggleBtn.dataset.langKey = 'settings_colorblind_toggle_on';
                colorblindToggleBtn.innerText = uiTranslations.settings_colorblind_toggle_on[currentLang];
                themeToggleBtn.style.display = 'block';

                if (theme === 'dark') {
                    themeToggleBtn.dataset.langKey = 'settings_theme_toggle_light';
                    themeToggleBtn.innerText = uiTranslations.settings_theme_toggle_light[currentLang];
                } else {
                    themeToggleBtn.dataset.langKey = 'settings_theme_toggle_dark';
                    themeToggleBtn.innerText = uiTranslations.settings_theme_toggle_dark[currentLang];
                }
            }
        }

        let currentFontSize = 16;
        document.getElementById('font-increase-btn').addEventListener('click', () => {
            currentFontSize = Math.min(24, currentFontSize + 2);
            document.documentElement.style.setProperty('--font-size-base', `${currentFontSize}px`);
            saveSettings();
        });
        document.getElementById('font-decrease-btn').addEventListener('click', () => {
            currentFontSize = Math.max(12, currentFontSize - 2);
            document.documentElement.style.setProperty('--font-size-base', `${currentFontSize}px`);
            saveSettings();
        });
        
        document.getElementById('reset-progress-btn').addEventListener('click', () => {
            if (confirm(uiTranslations.confirm_reset[currentLang])) {
                localStorage.removeItem(SAVE_KEY_ACHIEVEMENTS);
                showToast(uiTranslations.reset_toast[currentLang]);
                setTimeout(() => location.reload(), 1500);
            }
        });

        function initAccessibilityPopup() {
            const accessibilityModal = document.getElementById('accessibility-modal');
            const hasSeen = localStorage.getItem('accessibilityNoticeShown');

            if (!hasSeen) {
                accessibilityModal.classList.add('show');
            }

            document.getElementById('close-accessibility-modal').addEventListener('click', () => {
                accessibilityModal.classList.remove('show');
                localStorage.setItem('accessibilityNoticeShown', 'true');
            });
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            loadAchievements();
            initializeGame();
            initAccessibilityPopup();
        });
    </script>
</body>
</html>
