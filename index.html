<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="pageTitle">ÂÆ∂‰∫ãÂ§ß‰ΩúÊà∞</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü§ù</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <style>
        :root {
            --font-size-base: 16px;
            --light-bg: #F2F6D0;
            --light-container-bg: #EFDCAB;
            --light-accent-bg: #ebb881;
            --light-text: #443627;
            --light-border: #443627;
            --light-glow: rgba(235, 184, 129, 0.7);
            
            --dark-bg: #3A322C;
            --dark-container-bg: #4D443C;
            --dark-accent-bg: #D4B996;
            --dark-text: #E5D3B3;
            --dark-border: #E5D3B3;
            --dark-glow: rgba(229, 211, 179, 0.5);
            --dark-shadow-color: #2b2520;
            
            --cb-bg: #f0f0f0;
            --cb-container-bg: #d9d9d9;
            --cb-accent-bg: #005fcc;
            --cb-text: #1a1a1a;
            --cb-border: #1a1a1a;
            --cb-glow: rgba(0, 95, 204, 0.5);
        }

        [data-theme="light"] {
            --bg-color: var(--light-bg);
            --container-bg-color: var(--light-container-bg);
            --accent-bg-color: var(--light-accent-bg);
            --text-color: var(--light-text);
            --border-color: var(--light-border);
            --glow-color: var(--light-glow);
            --shadow-color: var(--light-border);
            --btn-active-text-color: var(--light-text);
        }

        [data-theme="dark"] {
            --bg-color: var(--dark-bg);
            --container-bg-color: var(--dark-container-bg);
            --accent-bg-color: var(--dark-accent-bg);
            --text-color: var(--dark-text);
            --border-color: var(--dark-border);
            --glow-color: var(--dark-glow);
            --shadow-color: var(--dark-shadow-color);
            --btn-active-text-color: var(--dark-bg);
        }
        
        [data-theme="colorblind"] {
            --bg-color: var(--cb-bg);
            --container-bg-color: var(--cb-container-bg);
            --accent-bg-color: var(--cb-accent-bg);
            --text-color: var(--cb-text);
            --border-color: var(--cb-border);
            --glow-color: var(--cb-glow);
            --shadow-color: var(--cb-border);
            --btn-active-text-color: #ffffff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            scrollbar-color: var(--accent-bg-color) var(--container-bg-color);
            scrollbar-width: thin;
        }
        
        *::-webkit-scrollbar {
            width: 10px;
        }

        *::-webkit-scrollbar-track {
            background: var(--container-bg-color);
        }

        *::-webkit-scrollbar-thumb {
            background-color: var(--accent-bg-color);
            border-radius: 20px;
            border: 2px solid var(--container-bg-color);
        }

        html {
            font-size: var(--font-size-base);
        }

        body {
    font-family: 'DotGothic16', sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.5s, color 0.5s;
    overflow: hidden; /* Added: Extra insurance to prevent any scrolling on the body */
}

.app-container {
    box-sizing: border-box; /* <<< THE FIX IS HERE */
    width: 95vw;
    height: 95vh;
    max-width: 1400px;
    max-height: 900px;
    background-color: var(--container-bg-color);
    border: 4px solid var(--border-color);
    box-shadow: 8px 8px 0px var(--shadow-color);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    transition: background-color 0.5s, border-color 0.5s, box-shadow 0.5s;
}
        header {
            flex: 0 0 auto;
            border-bottom: 4px solid var(--border-color);
            padding-bottom: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            max-height: 10vh;
        }

        .logo {
            font-size: clamp(1.0rem, 3vw, 2.5rem);
            font-weight: bold;
            color: var(--text-color);
            text-shadow: 3px 3px 0 var(--shadow-color), 0 0 15px var(--glow-color);
            cursor: pointer;
  
        }

        nav {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            font-family: inherit;
            font-size: clamp(0.8rem, 2vw, 1rem);
            padding: 0.4rem 0.8rem;
            border: 3px solid var(--border-color);
            background-color: var(--bg-color);
            color: var(--text-color);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
        }

        .nav-btn.active, .nav-btn:hover {
            background-color: var(--accent-bg-color);
            box-shadow: 4px 4px 0px var(--shadow-color);
            transform: translate(-4px, -4px);
            color: var(--btn-active-text-color);
        }

        .nav-btn:active {
            transform: translate(0, 0);
            box-shadow: none;
        }

        main {
            flex: 1 1 0;
            overflow: hidden;
            position: relative;
        }

        .view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }

        .view.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        #game-view {
            display: flex;
            flex-direction: row;
            gap: 1.5rem;
            height: 100%;
        }

        .scene-display {
            flex: 0 0 30%;
            background-color: var(--bg-color);
            border: 4px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(5rem, 15vw, 10rem);
        }

        .story-panel {
            flex: 1 1 70%;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            overflow: hidden;
        }

        #dialogue-box {
            background-color: var(--accent-bg-color);
            border: 3px solid var(--border-color);
            padding: 1.5rem;
            flex: 1 1 0;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 1.2rem;
            color: var(--btn-active-text-color);
        }

        #options-box {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 0 0 auto;
            max-height: 50%;
            overflow-y: auto;
            padding: 5px;
        }

        .option-btn {
            font-family: inherit;
            font-size: 1.1rem;
            width: 100%;
            padding: 1rem;
            text-align: left;
            border: 3px solid var(--border-color);
            background-color: var(--container-bg-color);
            color: var(--text-color);
            cursor: pointer;
            box-shadow: 4px 4px 0 var(--shadow-color);
            transition: transform 0.1s, box-shadow 0.1s;
            flex-shrink: 0;
        }

        .option-btn:hover {
            background-color: var(--bg-color);
        }
        
        .option-btn:active {
            transform: translate(4px, 4px);
            box-shadow: none;
        }

        .status-grid, .achievement-grid, .world-content {
            height: 100%;
            overflow-y: auto;
            padding: 1rem;
            background: var(--bg-color);
            border: 3px solid var(--border-color);
        }
        
        .status-grid, .achievement-grid {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        }

        .card {
            background: var(--container-bg-color);
            border: 3px solid var(--border-color);
            padding: 1.5rem;
        }
        
        .world-content h3, .world-content h4 {
            margin-bottom: 1em;
        }

        .world-content {
            padding: 2rem;
        }

        .world-content p {
            margin-bottom: 1em;
            line-height: 1.8;
        }

        .card h3 {
            color: var(--text-color);
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 1px 1px 0 var(--shadow-color);
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: var(--bg-color);
            border: 2px solid var(--border-color);
            margin-top: 0.5rem;
        }

        .progress-bar-inner {
            height: 100%;
            background-color: var(--accent-bg-color);
            width: 50%;
            transition: width 0.5s;
        }
        
        .achievement.unlocked {
            background-color: var(--accent-bg-color);
        }
        
        .achievement.unlocked h3, .achievement.unlocked p {
            color: var(--btn-active-text-color);
        }

        .achievement.unlocked p {
            opacity: 0.8;
        }

        .floating-btn-container {
            position: fixed;
            bottom: 1rem;
            left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 1000;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            background-color: var(--container-bg-color);
            color: var(--text-color);
            border: 3px solid var(--border-color);
            box-shadow: 4px 4px 0 var(--shadow-color);
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s;
        }

        .floating-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 var(--shadow-color);
            background-color: var(--accent-bg-color);
            color: var(--btn-active-text-color);
        }

        .floating-btn:active {
            transform: translate(4px, 4px);
            box-shadow: none;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--bg-color);
            padding: 2rem;
            border: 4px solid var(--border-color);
            box-shadow: 8px 8px 0px var(--shadow-color);
            max-width: 600px;
            width: 90%;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-content .modal-title {
             margin-bottom: 1.5rem;
        }

        .modal-content .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .modal-content p {
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        
        #accessibility-modal .modal-content h4 { margin-top: 1.5rem; margin-bottom: 0.5rem; }

        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px dashed var(--border-color);
        }
        .settings-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .settings-row button, .modal-action-btn {
            font-family: inherit;
            font-size: 1rem;
            padding: 0.5rem 1rem;
            border: 3px solid var(--border-color);
            background-color: var(--container-bg-color);
            color: var(--text-color);
            cursor: pointer;
        }
        .modal-action-btn {
            display: block;
            margin: 2rem auto 0;
            min-width: 120px;
        }

        @media (max-width: 768px) {
            html { 
                font-size: 14px; 
            }
            .app-container {
                padding: 0.5rem;
                gap: 0.5rem;
                border-width: 2px;
            }
             header {
                padding-bottom: 0.5rem;
                justify-content: center;
                border-bottom-width: 2px;
            }
            #game-view { 
                flex-direction: column;
                gap: 0.5rem;
            }
            .scene-display { 
                flex: 0 0 30%;
                font-size: clamp(4rem, 20vh, 6rem);
            }
            .story-panel {
                flex: 1 1 70%;
            }
            #dialogue-box {
                font-size: 1rem;
                padding: 1rem;
            }
            .option-btn {
                font-size: 0.9rem;
                padding: 0.75rem;
            }
            .floating-btn-container { bottom: 0.5rem; left: 0.5rem; }
            .floating-btn { width: 40px; height: 40px; font-size: 1.2rem; }
        }
    </style>
</head>
<body data-theme="light">
    <div class="app-container" role="application">
        <header role="banner">
            <div class="logo" onclick="location.reload()" role="button" tabindex="0" data-lang-key="title">ÂÆ∂‰∫ãÂ§ß‰ΩúÊà∞</div>
            <nav role="navigation" aria-label="Main Navigation">
                <button class="nav-btn active" data-view="game-view" data-lang-key="nav_main_game">‰∏ªÈÅäÊà≤</button>
                <button class="nav-btn" data-view="status-view" data-lang-key="nav_status">ËßíËâ≤ÁãÄÊÖã</button>
                <button class="nav-btn" data-view="achievements-view" data-lang-key="nav_achievements">ÊàêÂ∞±Á≥ªÁµ±</button>
                <button class="nav-btn" data-view="world-view" data-lang-key="nav_worldview">‰∏ñÁïåËßÄ</button>
            </nav>
        </header>

        <main role="main">
            <div id="game-view" class="view active" role="region" aria-labelledby="game-view-label">
                <h2 id="game-view-label" class="sr-only" style="display:none;">Main Game View</h2>
                <div class="scene-display" id="scene-image" aria-live="polite" aria-atomic="true"></div>
                <div class="story-panel">
                    <div id="dialogue-box" aria-live="polite" aria-atomic="true"></div>
                    <div id="options-box" role="radiogroup" aria-label="Story Choices"></div>
                </div>
            </div>

            <div id="status-view" class="view" role="region" aria-labelledby="status-view-label" aria-hidden="true">
                 <h2 id="status-view-label" class="sr-only">Character Status</h2>
                <div class="status-grid" id="status-grid-content"></div>
            </div>

            <div id="achievements-view" class="view" role="region" aria-labelledby="achievements-view-label" aria-hidden="true">
                <h2 id="achievements-view-label" class="sr-only">Achievements</h2>
                 <div class="achievement-grid" id="achievement-grid-content"></div>
            </div>

            <div id="world-view" class="view" role="region" aria-labelledby="world-view-label" aria-hidden="true">
                 <div class="world-content" id="world-content-dynamic">
                    <h3 data-lang-key="world_title">üåç ‰∏ñÁïåËßÄË®≠ÂÆö</h3>
                    <p data-lang-key="world_p1">Ê≠°Ëøé‰æÜÂà∞„ÄåÁèæÂØ¶2025Ëôü„ÄçÂπ≥Ë°åÂÆáÂÆô‰∏ñÁïåÔºå‰∏ÄÂÄãË°®Èù¢Áúã‰ººÂπ≥Âá°ÔºåÂØ¶Ââá...ÈùûÂ∏∏Âç±Èö™ÁöÑÂú∞Êñπ„ÄÇ</p>
                    <p data-lang-key="world_p2">Âú®ÈÄôË£°ÔºåÊó•Â∏∏ÁöÑÂÆ∂ÂãôË¢´‰∏ÄÁ®ÆÁ•ûÁßòÁöÑÂÆáÂÆôÂ∞ÑÁ∑ö„ÄåÊá∂ÊÉ∞Á≤íÂ≠ê„ÄçÊâÄÂΩ±ÈüøÔºåÂÆÉÂÄëÊúÉÂØ¶È´îÂåñÊàêÂêÑÁ®ÆË¢´Á®±ÁÇ∫„ÄåÂÆ∂‰∫ãÁç∏„ÄçÁöÑÈ∫ªÁÖ©Â≠òÂú®„ÄÇ</p>
                    <p data-lang-key="world_p3">‰æãÂ¶ÇÔºåÂ†ÜÁ©çÁöÑÁ¢óÁõ§ÊúÉËûçÂêàÊàêÈªèÊªëÁöÑ„ÄåÊ≤πËÜ©Âè≤ËêäÂßÜ„ÄçÔºåÊï£ËêΩÁöÑË°£Áâ©ÊúÉÁ≥æÁ∫èÊàê„ÄåÊ£âÁµÆÂ∑®Ëüí„ÄçÔºåËÄåÂøòË®òÂÄíÁöÑÂûÉÂúæÂâáÊúÉÂ≠ïËÇ≤Âá∫ÊÉ°Ëá≠ÁöÑ„ÄåËÖêÊïóÂÖÉÁ¥†„Äç„ÄÇ</p>
                    <p data-lang-key="world_p4">‰Ω†Âíå‰Ω†ÁöÑ‰º¥‰æ∂Ôºå‰ΩúÁÇ∫ÈÄôÂÄãÂÆ∂ÁöÑ„ÄåÈ†òÂüüÂÆàË≠∑ËÄÖ„ÄçÔºåÂøÖÈ†àÈÅãÁî®Êô∫ÊÖß„ÄÅÊ∫ùÈÄöÂíåÂÅ∂ÁàæÁöÑÂøÖÊÆ∫ÊäÄÔºà‰æãÂ¶ÇÂè´Â§ñË≥£ÔºâÔºå‰æÜÊ∑®ÂåñÈÄô‰∫õÂÆ∂‰∫ãÁç∏ÔºåÁ∂≠Ë≠∑ÂÖ©‰∫∫Â∞èÂ§©Âú∞ÁöÑÂíåÂπ≥ËàáÁß©Â∫è„ÄÇ</p>
                    <p data-lang-key="world_p5">Ë®ò‰ΩèÔºåÈÄô‰∏çÊòØ‰∏ÄÂ†¥Êà∞Áà≠ÔºåÊà∞Áà≠Ê∞∏ÈÅ†Ê≤íÊúâË¥èÂÆ∂„ÄÇÁ•ù‰Ω†Â•ΩÈÅãÔºåÂãáËÄÖÔºÅ</p>
                </div>
            </div>
        </main>
    </div>

    <div class="floating-btn-container">
        <button class="floating-btn" id="settings-btn" aria-label="Settings">‚öôÔ∏è</button>
        <button class="floating-btn" id="info-btn" aria-label="Information"> i </button>
    </div>

    <div class="modal-overlay" id="settings-modal" role="dialog" aria-modal="true" aria-labelledby="settings-title">
        <div class="modal-content">
            <button class="close-modal" data-modal="settings-modal" aria-label="Close Settings">&times;</button>
            <h3 id="settings-title" class="modal-title" data-lang-key="settings_title">Ë®≠ÂÆö‰∏≠ÂøÉ</h3>
             <div class="settings-row">
                <span data-lang-key="settings_language">Ë™ûË®Ä (Language)</span>
                <button id="language-toggle-btn">English</button>
            </div>
            <div class="settings-row">
                <span data-lang-key="settings_theme">‰∏ªÈ°åÊ®°Âºè</span>
                <button id="theme-toggle-btn" data-lang-key="settings_theme_toggle_dark">ÂàáÊèõËá≥Â§úÈñìÊ®°Âºè</button>
            </div>
             <div class="settings-row">
                <span data-lang-key="settings_colorblind">ËºîÂä©Ê®°Âºè</span>
                <button id="colorblind-toggle-btn" data-lang-key="settings_colorblind_toggle_on">ÈñãÂïüËâ≤Áõ≤Ê®°Âºè</button>
            </div>
            <div class="settings-row">
                <span data-lang-key="settings_fontsize">Â≠óÈ´îÂ§ßÂ∞è</span>
                <div>
                    <button id="font-decrease-btn" aria-label="Decrease Font Size">-A</button>
                    <button id="font-increase-btn" aria-label="Increase Font Size">A+</button>
                </div>
            </div>
             <div class="settings-row">
                <span data-lang-key="settings_progress">ÈÅäÊà≤ÈÄ≤Â∫¶</span>
                <button id="reset-progress-btn" data-lang-key="settings_reset">Ê∏ÖÈô§ÊâÄÊúâÊàêÂ∞±</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="info-modal" role="dialog" aria-modal="true" aria-labelledby="info-title">
        <div class="modal-content">
            <button class="close-modal" data-modal="info-modal" aria-label="Close Information">&times;</button>
            <div id="info-content-dynamic">
                <h3 id="info-title" class="modal-title" data-lang-key="info_title">ÈóúÊñºÊú¨Â∞àÊ°à</h3>
                <p data-lang-key="info_p1">Êú¨‰ΩúÂìÅÁÇ∫ÂèÉÂä†Ëá∫‰∏≠Â∏ÇÊîøÂ∫úÁ§æÊúÉÂ±Ä‰∏ªËæ¶‰πã„Äå2025ÊÄßÂà•Â§öÂ™íÈ´îÂæµÈÅ∏Ê¥ªÂãï„ÄçÊâÄÂâµ‰Ωú„ÄÇ‰∏ªÈ°åÁÇ∫„ÄåÊÄßÂà•ÂÖ±Ââµ‚àûÊï∏‰ΩçËóùÊÉ≥„ÄçÔºåÂ∏åÊúõÈÄèÈÅé‰∏ÄÂÄãÂÖÖÊªøy2kÂæ©Âè§ÈÅäÊà≤È¢®Ê†ºÁöÑ‰∫íÂãïÊïÖ‰∫ãÔºåÊé¢Ë®é„ÄåÂÆ∂‰∫ãÂàÜÂ∑•ÔºåÁÑ°ÈóúÊÄßÂà•„ÄçÁöÑÁêÜÂøµ„ÄÇ</p>
                <p><strong data-lang-key="info_p2_strong">‰ΩøÁî®Â∑•ÂÖ∑ËàáÁâàÊ¨äËÅ≤ÊòéÔºö</strong><span data-lang-key="info_p2_span">Êú¨Â∞àÊ°à‰ΩøÁî® HTML, CSS, JavaScript Ë£Ω‰Ωú„ÄÇÊâÄÊúâÂúñÂÉèÂÖßÂÆπÂùáÁÇ∫ÈÄöÁî® Emoji Á¨¶ËôüÔºåÂ≠óÈ´î‰æÜËá™ Google Fonts (DotGothic16)ÔºåÂú®ÂêàÁêÜ‰ΩøÁî®ÂéüÂâá‰∏ãÁî®ÊñºÊú¨Ê¨°ÈùûÂïÜÊ•≠ÊÄßË≥™ÁöÑÁ´∂Ë≥ΩÂâµ‰Ωú„ÄÇ</span></p>
            </div>
        </div>
    </div>
    
    <div class="modal-overlay" id="accessibility-modal" role="dialog" aria-modal="true" aria-labelledby="accessibility-title">
        <div class="modal-content">
            <h3 id="accessibility-title" class="modal-title">ËºîÂä©‰ΩøÁî®ÂäüËÉΩ Accessibility</h3>
            <p>
                Êú¨Á∂≤Á´ôËá¥ÂäõÊñºÊèê‰æõÂèãÂñÑÁöÑÁÄèË¶ΩÈ´îÈ©óÔºå‰∏¶ÊîØÊè¥‰ª•‰∏ãËºîÂä©ÂäüËÉΩÔºö<br>
                This site is committed to providing a friendly user experience and supports the following accessibility features:
            </p>
            <h4>ÈõôË™û‰ªãÈù¢ / Dual Language</h4>
            <p>ÊÇ®ÂèØ‰ª•Âú®Ë®≠ÂÆö(‚öôÔ∏è)‰∏≠ÂàáÊèõ„ÄåÁπÅÈ´î‰∏≠Êñá„ÄçËàá„ÄåEnglish„Äç‰ªãÈù¢„ÄÇ<br>
               You can switch between "Traditional Chinese" and "English" in the Settings menu (‚öôÔ∏è).
            </p>
            <h4>È°ØÁ§∫Ê®°Âºè / Display Modes</h4>
            <p>Êèê‰æõ„ÄåÊó•Èñì„Äç„ÄÅ„ÄåÂ§úÈñì„ÄçËàá„ÄåÈ´òÂ∞çÊØîËâ≤Áõ≤„ÄçÊ®°ÂºèÔºåÂèØÊñºË®≠ÂÆö‰∏≠Ë™øÊï¥„ÄÇ<br>
               "Light", "Dark", and "High-Contrast Colorblind" modes are available in the settings.
            </p>
            <h4>Â≠óÈ´îÁ∏ÆÊîæ / Text Scaling</h4>
            <p>ÂèØËá™Áî±ÊîæÂ§ßÊàñÁ∏ÆÂ∞èÁ∂≤Á´ôÂ≠óÈ´îÔºåÊñπ‰æøÈñ±ËÆÄ„ÄÇ<br>
               You can freely increase or decrease the text size for better readability.
            </p>
            <h4>ARIA Ë™ûÊÑèÊ®ôÁ±§ / ARIA Friendly</h4>
            <p>Á∂≤Á´ôÁµêÊßãÊîØÊè¥Ëû¢ÂπïÈñ±ËÆÄÂô®ÔºåÊèêÂçáÊìç‰Ωú‰æøÂà©ÊÄß„ÄÇ<br>
               The site structure supports screen readers to enhance usability.
            </p>
            <button class="modal-action-btn" id="close-accessibility-modal">‰∫ÜËß£ÔºåÈñãÂßãÈÅäÊà≤ (Got it, start the game)</button>
        </div>
    </div>

    <script>
        const SAVE_KEY_ACHIEVEMENTS = 'houseworkBattleAchievements';
        const SAVE_KEY_SETTINGS = 'houseworkBattleSettings';

        let currentLang = 'zh-Hant';
        let preColorblindTheme = 'light';

        const uiTranslations = {
            pageTitle: { "zh-Hant": "ÂÆ∂‰∫ãÂ§ß‰ΩúÊà∞", "en": "Housework Battle" },
            title: { "zh-Hant": "ÂÆ∂‰∫ãÂ§ß‰ΩúÊà∞", "en": "Housework Battle" },
            nav_main_game: { "zh-Hant": "‰∏ªÈÅäÊà≤", "en": "Main Game" },
            nav_status: { "zh-Hant": "ËßíËâ≤ÁãÄÊÖã", "en": "Status" },
            nav_achievements: { "zh-Hant": "ÊàêÂ∞±Á≥ªÁµ±", "en": "Achievements" },
            nav_worldview: { "zh-Hant": "‰∏ñÁïåËßÄ", "en": "Worldview" },
            settings_title: { "zh-Hant": "Ë®≠ÂÆö‰∏≠ÂøÉ", "en": "Settings" },
            settings_language: { "zh-Hant": "Ë™ûË®Ä (Language)", "en": "Ë™ûË®Ä (Language)" },
            settings_theme: { "zh-Hant": "‰∏ªÈ°åÊ®°Âºè", "en": "Theme Mode" },
            settings_theme_toggle_dark: { "zh-Hant": "ÂàáÊèõËá≥Â§úÈñìÊ®°Âºè", "en": "Switch to Dark Mode" },
            settings_theme_toggle_light: { "zh-Hant": "ÂàáÊèõËá≥Êó•ÈñìÊ®°Âºè", "en": "Switch to Light Mode" },
            settings_colorblind: { "zh-Hant": "ËºîÂä©Ê®°Âºè", "en": "Accessibility Mode" },
            settings_colorblind_toggle_on: { "zh-Hant": "ÈñãÂïüËâ≤Áõ≤Ê®°Âºè", "en": "Enable Colorblind Mode" },
            settings_colorblind_toggle_off: { "zh-Hant": "ÈóúÈñâËâ≤Áõ≤Ê®°Âºè", "en": "Disable Colorblind Mode" },
            settings_fontsize: { "zh-Hant": "Â≠óÈ´îÂ§ßÂ∞è", "en": "Font Size" },
            settings_progress: { "zh-Hant": "ÈÅäÊà≤ÈÄ≤Â∫¶", "en": "Game Progress" },
            settings_reset: { "zh-Hant": "Ê∏ÖÈô§ÊâÄÊúâÊàêÂ∞±", "en": "Reset All Achievements" },
            info_title: { "zh-Hant": "ÈóúÊñºÊú¨Â∞àÊ°à", "en": "About This Project" },
            info_p1: { "zh-Hant": "Êú¨‰ΩúÂìÅÁÇ∫ÂèÉÂä†Ëá∫‰∏≠Â∏ÇÊîøÂ∫úÁ§æÊúÉÂ±Ä‰∏ªËæ¶‰πã„Äå2025ÊÄßÂà•Â§öÂ™íÈ´îÂæµÈÅ∏Ê¥ªÂãï„ÄçÊâÄÂâµ‰Ωú„ÄÇ‰∏ªÈ°åÁÇ∫„ÄåÊÄßÂà•ÂÖ±Ââµ‚àûÊï∏‰ΩçËóùÊÉ≥„ÄçÔºåÂ∏åÊúõÈÄèÈÅé‰∏ÄÂÄãÂÖÖÊªøy2kÂæ©Âè§ÈÅäÊà≤È¢®Ê†ºÁöÑ‰∫íÂãïÊïÖ‰∫ãÔºåÊé¢Ë®é„ÄåÂÆ∂‰∫ãÂàÜÂ∑•ÔºåÁÑ°ÈóúÊÄßÂà•„ÄçÁöÑÁêÜÂøµ„ÄÇ", "en": "This work was created for the '2025 Gender Multimedia Selection Event' hosted by the Taichung City Government's Social Affairs Bureau. The theme is 'Gender Co-creation ‚àû Digital Artistry,' aiming to explore the concept of 'housework division is not about gender' through an interactive story with a Y2K retro game style." },
            info_p2_strong: { "zh-Hant": "‰ΩøÁî®Â∑•ÂÖ∑ËàáÁâàÊ¨äËÅ≤ÊòéÔºö", "en": "Tools & Copyright:" },
            info_p2_span: { "zh-Hant": "Êú¨Â∞àÊ°à‰ΩøÁî® HTML, CSS, JavaScript Ë£Ω‰Ωú„ÄÇÊâÄÊúâÂúñÂÉèÂÖßÂÆπÂùáÁÇ∫ÈÄöÁî® Emoji Á¨¶ËôüÔºåÂ≠óÈ´î‰æÜËá™ Google Fonts (DotGothic16)ÔºåÂú®ÂêàÁêÜ‰ΩøÁî®ÂéüÂâá‰∏ãÁî®ÊñºÊú¨Ê¨°ÈùûÂïÜÊ•≠ÊÄßË≥™ÁöÑÁ´∂Ë≥ΩÂâµ‰Ωú„ÄÇ", "en": "This project was built with HTML, CSS, and JavaScript. All graphical content consists of universal Emoji symbols, and the font is from Google Fonts (DotGothic16), used under fair use principles for this non-commercial competition entry." },
            world_title: { "zh-Hant": "üåç ‰∏ñÁïåËßÄË®≠ÂÆö", "en": "üåç World Setting" },
            world_p1: { "zh-Hant": "Ê≠°Ëøé‰æÜÂà∞„ÄåÁèæÂØ¶2025Ëôü„ÄçÂπ≥Ë°åÂÆáÂÆô‰∏ñÁïåÔºå‰∏ÄÂÄãË°®Èù¢Áúã‰ººÂπ≥Âá°ÔºåÂØ¶Ââá...ÈùûÂ∏∏Âç±Èö™ÁöÑÂú∞Êñπ„ÄÇ", "en": "Welcome to the parallel universe of 'Reality 2025,' a world that appears ordinary on the surface but is, in fact... very dangerous." },
            world_p2: { "zh-Hant": "Âú®ÈÄôË£°ÔºåÊó•Â∏∏ÁöÑÂÆ∂ÂãôË¢´‰∏ÄÁ®ÆÁ•ûÁßòÁöÑÂÆáÂÆôÂ∞ÑÁ∑ö„ÄåÊá∂ÊÉ∞Á≤íÂ≠ê„ÄçÊâÄÂΩ±ÈüøÔºåÂÆÉÂÄëÊúÉÂØ¶È´îÂåñÊàêÂêÑÁ®ÆË¢´Á®±ÁÇ∫„ÄåÂÆ∂‰∫ãÁç∏„ÄçÁöÑÈ∫ªÁÖ©Â≠òÂú®„ÄÇ", "en": "Here, daily chores are affected by a mysterious cosmic ray, the 'Laziness Particle,' which materializes into troublesome entities known as 'Chore Beasts.'" },
            world_p3: { "zh-Hant": "‰æãÂ¶ÇÔºåÂ†ÜÁ©çÁöÑÁ¢óÁõ§ÊúÉËûçÂêàÊàêÈªèÊªëÁöÑ„ÄåÊ≤πËÜ©Âè≤ËêäÂßÜ„ÄçÔºåÊï£ËêΩÁöÑË°£Áâ©ÊúÉÁ≥æÁ∫èÊàê„ÄåÊ£âÁµÆÂ∑®Ëüí„ÄçÔºåËÄåÂøòË®òÂÄíÁöÑÂûÉÂúæÂâáÊúÉÂ≠ïËÇ≤Âá∫ÊÉ°Ëá≠ÁöÑ„ÄåËÖêÊïóÂÖÉÁ¥†„Äç„ÄÇ", "en": "For example, piled-up dishes merge into a slimy 'Grease Slime,' scattered clothes tangle into a 'Lint Serpent,' and forgotten trash breeds a foul 'Rotten Element.'" },
            world_p4: { "zh-Hant": "‰Ω†Âíå‰Ω†ÁöÑ‰º¥‰æ∂Ôºå‰ΩúÁÇ∫ÈÄôÂÄãÂÆ∂ÁöÑ„ÄåÈ†òÂüüÂÆàË≠∑ËÄÖ„ÄçÔºåÂøÖÈ†àÈÅãÁî®Êô∫ÊÖß„ÄÅÊ∫ùÈÄöÂíåÂÅ∂ÁàæÁöÑÂøÖÊÆ∫ÊäÄÔºà‰æãÂ¶ÇÂè´Â§ñË≥£ÔºâÔºå‰æÜÊ∑®ÂåñÈÄô‰∫õÂÆ∂‰∫ãÁç∏ÔºåÁ∂≠Ë≠∑ÂÖ©‰∫∫Â∞èÂ§©Âú∞ÁöÑÂíåÂπ≥ËàáÁß©Â∫è„ÄÇ", "en": "You and your partner, as the 'Domain Guardians' of this home, must use wisdom, communication, and the occasional ultimate move (like ordering takeout) to purify these Chore Beasts and maintain peace and order in your small world." },
            world_p5: { "zh-Hant": "Ë®ò‰ΩèÔºåÈÄô‰∏çÊòØ‰∏ÄÂ†¥Êà∞Áà≠ÔºåÊà∞Áà≠Ê∞∏ÈÅ†Ê≤íÊúâË¥èÂÆ∂„ÄÇÁ•ù‰Ω†Â•ΩÈÅãÔºåÂãáËÄÖÔºÅ", "en": "Remember, this is not a war; there are no winners in war. Good luck, hero!" },
            status_relationship_title: { "zh-Hant": "üíñ Èóú‰øÇÊ∫´Â∫¶Ë®à", "en": "üíñ Relationship Meter" },
            status_relationship_desc: { "zh-Hant": "‰Ω†Ëàá‰º¥‰æ∂ÁöÑÈóú‰øÇÂíåË´ßÂ∫¶„ÄÇ", "en": "The harmony of your relationship." },
            status_stress_title: { "zh-Hant": "ü§Ø Â£ìÂäõÊåáÊï∏", "en": "ü§Ø Stress Index" },
            status_stress_desc: { "zh-Hant": "‰Ω†ÁöÑÁ≤æÁ•ûÂ£ìÂäõÔºåÂ§™È´òÊúÉÂ¥©ÊΩ∞Âñî„ÄÇ", "en": "Your mental stress. Too high and you'll break." },
            status_cleanliness_title: { "zh-Hant": "‚ú® Áí∞Â¢ÉÊï¥ÊΩîÂ∫¶", "en": "‚ú® Cleanliness Level" },
            status_cleanliness_desc: { "zh-Hant": "‰Ω†ÂÄëÂ∞èÁ™©ÁöÑ‰πæÊ∑®Á®ãÂ∫¶„ÄÇ", "en": "The cleanliness of your home." },
            status_money_title: { "zh-Hant": "üí∞ ÂÖ±ÂêåÂü∫Èáë", "en": "üí∞ Shared Funds" },
            status_money_desc: { "zh-Hant": "ÂèØ‰ª•Áî®‰æÜËß£Ê±∫ÂæàÂ§öÂïèÈ°åÁöÑÁ•ûÂ•áÁ¥ôÁâáÂíåÁ°¨Âπ£„ÄÇ", "en": "Magical paper and coins that can solve many problems." },
            ach_unlocked_toast: { "zh-Hant": "ÊàêÂ∞±Ëß£ÈéñÔºö", "en": "Achievement Unlocked: " },
            ach_locked_desc: { "zh-Hant": "ÔºüÔºüÔºü", "en": "???" },
            confirm_reset: { "zh-Hant": "Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÊàêÂ∞±ÂíåÂ≠òÊ™îÂóéÔºüÊ≠§Êìç‰ΩúÁÑ°Ê≥ïÂæ©Âéü„ÄÇ", "en": "Are you sure you want to delete all achievements and saved data? This action cannot be undone." },
            reset_toast: { "zh-Hant": "ÈÄ≤Â∫¶Â∑≤Ê∏ÖÈô§ÔºÅÈ†ÅÈù¢Â∞áÊúÉÈáçÊñ∞Êï¥ÁêÜ„ÄÇ", "en": "Progress cleared! The page will now refresh." },
        };
        
        const achievementsData = {
            START: { name: { "zh-Hant": 'Â∫èÂπïÊãâÈñã', "en": 'The Curtain Rises' }, desc: { "zh-Hant": 'ÈñãÂßã‰Ω†ÁöÑÂÆ∂‰∫ãÂ§ß‰ΩúÊà∞„ÄÇ', "en": 'Begin your housework battle.' }, icon: 'üé¨' },
            COMMUNICATOR: { name: { "zh-Hant": 'Ê∫ùÈÄöÂ§ßÂ∏´', "en": 'Master Communicator' }, desc: { "zh-Hant": 'ÊàêÂäüÈÄèÈÅéÂ∞çË©±Ëß£Ê±∫Á¨¨‰∏ÄÊ¨°Âç±Ê©ü„ÄÇ', "en": 'Successfully resolved the first crisis through dialogue.' }, icon: 'üí¨' },
            TEAMWORK: { name: { "zh-Hant": 'ÊúÄ‰Ω≥ÊãçÊ™î', "en": 'Best Partners' }, desc: { "zh-Hant": 'Ëàá‰º¥‰æ∂ÂÆåÁæéÂêà‰ΩúÔºåËß£Ê±∫‰∏ÄÈ†ÖÂÆ∂‰∫ãÈõ£È°å„ÄÇ', "en": 'Worked perfectly with your partner to solve a chore problem.' }, icon: 'ü§ù' },
            SOLO_WARRIOR: { name: { "zh-Hant": 'Â≠§Áç®ÁöÑÊ∏ÖÊΩîÂ∑•', "en": 'The Lone Cleaner' }, desc: { "zh-Hant": 'Áç®Ëá™‰∏Ä‰∫∫Ëß£Ê±∫‰∫ÜÊâÄÊúâÂïèÈ°åÔºåÊúâÈªûÂøÉÈÖ∏„ÄÇ', "en": 'You solved all the problems by yourself. It feels a bit lonely.' }, icon: 'üòî' },
            TECH_GEEK: { name: { "zh-Hant": 'ÁßëÊäÄ‰ø°Âæí', "en": 'Tech Believer' }, desc: { "zh-Hant": 'Ê±∫ÂÆö‰ΩøÁî®ÈáëÈå¢ÔºàÁßëÊäÄÔºâÁöÑÂäõÈáè„ÄÇ', "en": 'Decided to use the power of money (technology).' }, icon: 'ü§ñ' },
            PROCRASTINATOR: { name: { "zh-Hant": 'ÊãñÂª∂Áóá‰πãÁéã', "en": 'King of Procrastination' }, desc: { "zh-Hant": 'Ê±∫ÂÆöÊääÂïèÈ°åÁïôÁµ¶ÊòéÂ§©Ôºå‰∏ÄÁ®ÆÊô∫ÊÖß„ÄÇ', "en": 'Decided to leave the problem for tomorrow. A kind of wisdom.' }, icon: '‚è≥' },
            NUCLEAR: { name: { "zh-Hant": 'Ê†∏Êà∞Áà≠ÁàÜÁôº', "en": 'Nuclear War' }, desc: { "zh-Hant": 'Âõ†ÂÆ∂‰∫ãÂïèÈ°åÂºïÁôº‰∫ÜÂè≤Ë©©Á¥öÁà≠Âêµ„ÄÇ', "en": 'An epic argument was triggered by household chores.' }, icon: 'üí•' },
            CHAOS_ORDER: { name: { "zh-Hant": 'Ê∑∑Ê≤åÁß©Â∫è', "en": 'Chaotic Order' }, desc: { "zh-Hant": 'Êé•ÂèóÊ∑∑‰∫ÇÔºå‰∏¶Âú®ÂÖ∂‰∏≠ÊâæÂà∞‰∫ÜÁîüÊ¥ªÁöÑÂπ≥Ë°°„ÄÇ', "en": 'Embraced the chaos and found a balance in life within it.' }, icon: '‚òØÔ∏è' },
            PERFECT_ENDING: { name: { "zh-Hant": 'ÂÆ∂‰∫ã‰πãÁ•û', "en": 'God of Housework' }, desc: { "zh-Hant": '‰Ω†ÂÄëÈÅîÊàê‰∫ÜÂÆåÁæéÁöÑÂÆ∂‰∫ãÂàÜÂ∑•ËàáÂíåË´ß„ÄÇ', "en": 'You have achieved a perfect division of labor and harmony.' }, icon: 'üèÜ' },
        };

        const storyNodesData = [
            {
                id: 1, image: 'üò±',
                text: { "zh-Hant": 'ÁµêÊùü‰∫ÜÊº´Èï∑ÁöÑ‰∏ÄÂ§©Ôºå‰Ω†ÂõûÂà∞ÂÆ∂ÔºåÊúüÂæÖ‰∏ÄÂÄãÊ∫´ÊöñÁöÑÊìÅÊä±„ÄÇ‰ΩÜÁèæÂØ¶Áµ¶‰∫Ü‰Ω†‰∏ÄË®òÈáçÊã≥ÔºöÂÆ¢Âª≥ÂÉèÊòØË¢´ÂìàÂ£´Â•áÊãÜÈÅ∑ÈöäÊ¥óÂä´ÈÅé„ÄÇ‰Ω†ÁöÑ‰º¥‰æ∂P2Êà¥ËëóÈôçÂô™ËÄ≥Ê©üÔºåÂú®Êï∏‰Ωç‰∏ñÁïåË£°ÊøÄÊà∞!', "en": 'After a long day, you get home expecting a warm hug. But reality hits you hard: the living room looks like it was ransacked by a team of huskies. Your partner, P2, is deep in a digital battle with noise-canceling headphones on!' },
                options: [
                    { text: { "zh-Hant": 'ÈÅ∏È†ÖA: Ê∑±ÂëºÂê∏ÔºåÂÜ∑ÈùúÂú∞Ëµ∞ÈÅéÂéªÔºåËºïÊãçP2ÁöÑËÇ©ËÜÄ„ÄÇ', "en": 'Option A: Take a deep breath, calmly walk over, and gently tap P2\'s shoulder.' }, nextId: 2, effects: { stress: -5 } },
                    { text: { "zh-Hant": 'ÈÅ∏È†ÖB: ÊÄíÊ∞£ÂÄºÁ™ÅÁ†¥Â§©ÈöõÔºÅ„Äå‰Ω†ÊòØÁûé‰∫ÜÂóéÊ≤íÁúãÂà∞ÂÆ∂Ë£°ÂÉèË±¨Á™©ÔºÅ„Äç', "en": 'Option B: Rage level over 9000! "Are you blind? Can\'t you see this place is a pigsty!"' }, nextId: 3, effects: { stress: +15, relationship: -10 } },
                    { text: { "zh-Hant": 'ÈÅ∏È†ÖC: ÈªòÈªòÊãøËµ∑ÊéÉÊääÔºåÂåñË∫´ÊÇ≤ÊÉÖËã±ÈõÑÔºåÁî®ÊâìÊéÉÁöÑÂô™Èü≥Âê∏ÂºïÊ≥®ÊÑè„ÄÇ', "en": 'Option C: Silently pick up a broom, become a tragic hero, and use the sound of cleaning to get their attention.' }, nextId: 4, effects: { cleanliness: +10, stress: +5 } },
                    { text: { "zh-Hant": 'ÈÅ∏È†ÖD: ÊîæÊ£ÑÊéôÊâéÔºåÂä†ÂÖ•Ê∑∑‰∫Ç„ÄÇÊääÂåÖ‰∏ÄÊâîÔºåÁô±Âú®Ê≤ôÁôº‰∏äÊªëÊâãÊ©ü„ÄÇ', "en": 'Option D: Give up the struggle and join the chaos. Toss your bag and collapse on the sofa to scroll through your phone.' }, nextId: 5, effects: { stress: -10 }, achievement: 'PROCRASTINATOR' }
                ]
            },
            {
                id: 2, image: 'üí¨', text: { "zh-Hant": 'P2Êëò‰∏ãËÄ≥Ê©üÔºå„ÄåÊÄéÈ∫ºÂï¶Ôºü„Äç‰Ω†ÁúãËëóÂ∞çÊñπÁÑ°ËæúÁöÑÁúºÁ•ûÔºåÊ±∫ÂÆöÁî®Ë™ûË®ÄÁöÑËóùË°ì‰æÜÂåñËß£ÈÄôÂ†¥Âç±Ê©ü„ÄÇ', "en": 'P2 takes off the headphones, "What\'s up?" You look at their innocent expression and decide to use the art of words to defuse the crisis.' },
                options: [
                    { text: { "zh-Hant": '„ÄåË¶™ÊÑõÁöÑÔºåÊàëÂÄëÁöÑÂ∞èÁ™©Â•ΩÂÉèË¢´È≠îÁâ©ÂÖ•‰æµ‰∫ÜÔºåÈúÄË¶ÅÂÖ©‰ΩçÂãáËÄÖËÅØÊâãÊ∑®ÂåñÔºÅ„Äç', "en": '"Honey, it looks like our little nest has been invaded by monsters. It needs two heroes to cleanse it!"' }, nextId: 6, effects: { relationship: +5 }, achievement: 'COMMUNICATOR' },
                    { text: { "zh-Hant": '„ÄåÊàë‰ªäÂ§©Â•ΩÁ¥ØÂñî...ÁúãÂà∞ÂÆ∂Ë£°ÈÄôÊ®£ÔºåÂøÉÊÉÖÊúâÈªû...ÂóöÂóöÂóö„Äç', "en": '"I\'m so tired today... Seeing the house like this makes me feel... sniffle..."' }, nextId: 7, effects: { relationship: +3 } },
                    { text: { "zh-Hant": '„ÄåÊàëÂÄë‰æÜË®ÇÂÄãË¶èÂâáÂêßÔºåÊØèÂ§©Áé©ÈÅäÊà≤ÂâçÔºåËä±15ÂàÜÈêòÂø´ÈÄüÊï¥ÁêÜ‰∏Ä‰∏ãÂ¶Ç‰ΩïÔºü„Äç', "en": '"Let\'s make a rule. How about we spend 15 minutes tidying up before gaming every day?"' }, nextId: 8, effects: { relationship: +2, cleanliness: +5 } }
                ]
            },
            {
                id: 3, image: 'üí•', text: { "zh-Hant": '‰Ω†ÁöÑÊÄíÂêºÊàêÂäüÈªûÁáÉ‰∫ÜÊà∞ÁÅ´„ÄÇP2‰πüÁÅ´‰∫ÜÔºö„ÄåÊàë‰∏ä‰∫Ü‰∏ÄÊï¥Â§©Áè≠ÔºåÁé©‰∏Ä‰∏ãÈÅäÊà≤ÊÄéÈ∫º‰∫ÜÔºü‰Ω†Â∞±‰∏çËÉΩÂÖàÊî∂‰∏Ä‰∏ãÂóéÔºü„ÄçÁ©∫Ê∞£‰∏≠ÂÖÖÊªø‰∫ÜÊö¥ÊÄíÁöÑÂë≥ÈÅì„ÄÇ', "en": 'Your roar successfully ignited the flames of war. P2 fires back: "I worked all day, what\'s wrong with playing a game? Couldn\'t you have just started cleaning?" The air is thick with rage.' },
                options: [
                    { text: { "zh-Hant": '„ÄåÊàë‰∏ä‰∫Ü‰∏ÄÂ§©Áè≠Âõû‰æÜÈÇÑË¶ÅÁµ¶‰Ω†Êî∂ÊãæÁàõÊî§Â≠êÔºü„ÄçÊà∞Áà≠ÂçáÁ¥öÔºÅ', "en": '"I worked all day too, and I have to come home to clean up your mess?" The war escalates!' }, nextId: 100, effects: { relationship: -15, stress: +20 }, achievement: 'NUCLEAR'},
                    { text: { "zh-Hant": 'ÊÑèË≠òÂà∞ÈÄôÊ®£‰∏ãÂéª‰∏çË°åÔºåÂº∑Ëø´Ëá™Â∑±ÂÜ∑ÈùúÔºö„ÄåÊä±Ê≠âÔºåÊàëÂ§™Á¥Ø‰∫ÜÔºåË™ûÊ∞£‰∏çÂ•Ω„ÄÇ‰ΩÜÊàëÂÄëÈúÄË¶ÅË´áË´á„ÄÇ„Äç', "en": 'Realizing this is going nowhere, you force yourself to calm down: "Sorry, I\'m just tired and my tone was bad. But we need to talk."' }, nextId: 2, effects: { stress: -10, relationship: +5 } },
                    { text: { "zh-Hant": 'ÔºàÊëîÈñÄÈÄ≤ÊàøÔºâÂÜ∑Êà∞ÈñãÂßã‰∫Ü„ÄÇ', "en": '(Slam the door and go to the bedroom) The cold war begins.' }, nextId: 101, effects: { relationship: -10, stress: +10 } }
                ]
            },
            {
                id: 4, image: 'üßπ', text: { "zh-Hant": '‰Ω†ÁÑ°ËÅ≤Âú∞ÊâìÊéÉËëóÔºåÊéÉÊääËàáÂú∞ÊùøÁöÑÊë©Êì¶ËÅ≤Ë≠úÂØ´Ëëó‰∏ÄÈ¶ñÊÄ®ÂøµÁöÑË©©„ÄÇÂçäÂ∞èÊôÇÂæåÔºåP2ÁµÇÊñºÊ≥®ÊÑèÂà∞ÔºåÂ∞∑Â∞¨Âú∞Ë™™Ôºö„ÄåÂïäÔºåÂ∞ç‰∏çËµ∑Êàë‰æÜÂπ´Âøô...„Äç', "en": 'You clean silently, the sound of the broom against the floor composing a resentful poem. Half an hour later, P2 finally notices and says awkwardly, "Oh, sorry, let me help..."' },
                options: [
                    { text: { "zh-Hant": '„ÄåÊ≤í‰∫ãÔºåÊàë‰æÜÂ∞±Â•Ω„ÄÇ„ÄçÔºàÂÖßÂøÉÊà≤ÔºöÂ∞çÔºåË®ò‰ΩèÈÄô‰ªΩÊÑßÁñöÂêßÔºÅÔºâ', "en": '"It\'s fine, I\'ll do it." (Internal monologue: Yes, remember this guilt!)' }, nextId: 102, effects: { cleanliness: +15, relationship: -2 }, achievement: 'SOLO_WARRIOR' },
                    { text: { "zh-Hant": '„ÄåÂ•ΩÂïäÔºåÈÇ£‰Ω†ÂéªÊääÂªöÊàøÁöÑ„ÄéÊ≤πËÜ©Âè≤ËêäÂßÜ„ÄèËôïÁêÜÊéâ„ÄÇ„Äç', "en": '"Okay, then you go deal with the \'Grease Slime\' in the kitchen."' }, nextId: 9, effects: { cleanliness: +10, relationship: +2 } }
                ]
            },
            {
                id: 5, image: 'üßò', text: { "zh-Hant": '‰Ω†Ê±∫ÂÆöËàáÊ∑∑‰∫ÇÂÖ±Â≠ò„ÄÇÊ≤ôÁôºÁöÑ‰∏ÄËßíÈÇÑÁÆó‰πæÊ∑®Ôºå‰Ω†Á∏ÆÂú®ÈÇ£Ë£°ÔºåÈÄ≤ÂÖ•‰∫ÜÂãøÊìæË≥¢ËÄÖÊôÇÈñì„ÄÇP2ÊâìÂÆå‰∏ÄÂ±ÄÈÅäÊà≤ÔºåÁúãÂà∞‰Ω†‰πüÂ¶ÇÊ≠§‚ÄúÊîæÈ¨Ü‚ÄùÔºå‰º∏‰∫ÜÂÄãÊá∂ËÖ∞Ë™™Ôºö„ÄåÊôöÈªûÂÜç‰∏ÄËµ∑Êî∂ÂêßÔºü„Äç', "en": 'You decide to coexist with the chaos. A corner of the sofa is clean enough, so you curl up there and enter a state of zen. After a match, P2 sees you looking so "relaxed," stretches, and says, "Let\'s clean up together later?"' },
                options: [
                    { text: { "zh-Hant": '„ÄåÂ•ΩÂïäÔºåÂÖàÂè´ÂÄãÂ§ñË≥£Ë£úÂÖÖÈ´îÂäõ„ÄÇ„Äç', "en": '"Sure, let\'s order takeout to recharge first."' }, nextId: 103, effects: { relationship: +5, cleanliness: -5, money: -20 }, achievement: 'CHAOS_ORDER' },
                    { text: { "zh-Hant": '„Äå‰∏ç‰∫ÜÔºåÊàëÊ∞∏ÈÅ†ÈÉΩ‰∏çÊÉ≥Êî∂‰∫Ü„ÄÇ„ÄçÔºàÈÄ≤ÂÖ•È†πÂª¢Ê®°ÂºèÔºâ', "en": '"No, I never want to clean again." (Enters degenerate mode)' }, nextId: 104, effects: { relationship: -5, cleanliness: -10 } }
                ]
            },
            {
                id: 6, image: 'ü§ù', text: { "zh-Hant": 'P2Ë¢´‰Ω†ÈÄóÁ¨ë‰∫ÜÔºå„ÄåÈÅµÂëΩÔºåÊàëÁöÑÈöäÈï∑ÔºÅÈÇ£...„ÄéÁ¢óÁõ§Âè≤ËêäÂßÜ„ÄèÂíå„ÄéË°£Áâ©Â∑®Ëüí„ÄèÔºåÊàëÂÄëÂÖàË®é‰ºêÂì™ÂÄãÔºü„Äç‰Ω†ÂÄëÂñúÊèê‰∏ÄÂ†¥ÊúâË∂£ÁöÑÂÜíÈö™„ÄÇ', "en": 'P2 chuckles, "Yes, my captain! So... the \'Dish Slime\' or the \'Laundry Serpent,\' which shall we vanquish first?" You\'ve just started a fun adventure.' },
                options: [
                    { text: { "zh-Hant": '„ÄåÂàÜÈ†≠Ë°åÂãïÔºÅÊàëÂéªË®é‰ºêÂè≤ËêäÂßÜÔºå‰Ω†ÂéªÈ¶¥ÊúçÂ∑®ËüíÔºÅ„Äç', "en": '"Let\'s split up! I\'ll slay the Slime, you tame the Serpent!"' }, nextId: 10, effects: { cleanliness: +20, relationship: +10 }, achievement: 'TEAMWORK' }
                ]
            },
            {
                id: 7, image: 'üò¢', text: { "zh-Hant": 'P2ÁúãÂà∞‰Ω†Â§±ËêΩÁöÑÊ®£Â≠êÔºåÂøÉË£°‰∏ÄÊè™ÔºåÁ´ãÂàªÊîæ‰∏ãÊéßÂà∂Âô®Ôºö„ÄåÂØ∂Ë≤ùÂ∞ç‰∏çËµ∑ÔºåÊòØÊàëÁöÑÈåØÔºå‰∏çË©≤ÈÄôÈ∫ºÊ≤íÁ•ûÁ∂ì„ÄÇÊàëÈ¶¨‰∏äÊî∂ÊãæÔºÅ„Äç', "en": 'Seeing your disappointed face, P2 feels a pang of guilt and immediately puts down the controller: "Honey, I\'m so sorry, it\'s my fault. I was being thoughtless. I\'ll clean up right now!"' },
                options: [
                    { text: { "zh-Hant": '„ÄåÊàëÂÄë‰∏ÄËµ∑ÂêßÔºåÈÄôÊ®£ÊØîËºÉÂø´„ÄÇ„Äç', "en": '"Let\'s do it together, it\'ll be faster."' }, nextId: 10, effects: { cleanliness: +20, relationship: +10 }, achievement: 'TEAMWORK' },
                    { text: { "zh-Hant": 'ÔºàÊä±‰ΩèÂ∞çÊñπÔºâ„ÄåÊ≤íÈóú‰øÇÔºåÊàë‰πüÂè™ÊòØÈúÄË¶Å‰Ω†ÁöÑÈóúÂøÉ„ÄÇ„Äç', "en": '(Hug them) "It\'s okay. I just needed to feel you care."' }, nextId: 10, effects: { relationship: +15 } }
                ]
            },
            {
                id: 8, image: 'üìú', text: { "zh-Hant": 'P2ÊÉ≥‰∫ÜÊÉ≥ÔºåÈªûÈªûÈ†≠Ôºö„ÄåËÅΩËµ∑‰æÜÂæàÂÖ¨Âπ≥„ÄÇÂ∞±ÂÉèÈÅäÊà≤ÁöÑÊØèÊó•‰ªªÂãô‰∏ÄÊ®£ÔºåÂÆåÊàêÈÇÑÊúâÁçéÂãµÔºà‰æãÂ¶ÇË¶™Ë¶™Ôºâ„ÄÇÊàê‰∫§ÔºÅ„Äç‰Ω†ÂÄëÂª∫Á´ã‰∫Ü‰∏ÄÂ•óÂ±¨ÊñºËá™Â∑±ÁöÑÂÆ∂‰∫ãÂÖ¨Á¥Ñ„ÄÇ', "en": 'P2 thinks for a moment and nods: "That sounds fair. Like a daily quest in a game, with rewards for completion (like kisses). Deal!" You establish your own housework pact.' },
                options: [
                    { text: { "zh-Hant": 'Â•ΩËÄ∂ÔºÅ‰Ω†ÂÄëÁöÑÊ∫ùÈÄöËàáÂêà‰ΩúÈÄ≤ÂÖ•‰∫ÜÊñ∞Á¥ÄÂÖÉÔºÅ', "en": 'Hooray! Your communication and cooperation have entered a new era!' }, nextId: 200, effects: { cleanliness: +15, relationship: +15, stress: -15 }, achievement: 'PERFECT_ENDING' }
                ]
            },
            {
                id: 9, image: '‚öîÔ∏è', text: { "zh-Hant": 'P2Êé•‰∏ã‰ªªÂãôÔºåÂâçÂæÄÂªöÊàø„ÄÇ‰∏ÄÊúÉÂÖíÂÇ≥‰æÜÈ©öÂëºÔºö„ÄåÂ§©ÂïäÔºÅÈÄôË£°ÁöÑbossÂ•ΩÂº∑ÔºÅÊàëÈúÄË¶ÅÊîØÊè¥ÔºÅ„ÄçÁúã‰æÜÊà∞Ê≥ÅÊøÄÁÉà„ÄÇ', "en": 'P2 accepts the quest and heads to the kitchen. A moment later, you hear a cry: "Oh my god! The boss in here is tough! I need backup!" The battle seems intense.' },
                options: [
                    { text: { "zh-Hant": '„ÄåÂãáËÄÖÔºåÊíê‰ΩèÔºÅÊàë‰æÜ‰∫ÜÔºÅ„ÄçÔºàÂä†ÂÖ•Êà∞È¨•Ôºâ', "en": '"Hold on, hero! I\'m coming!" (Join the battle)' }, nextId: 10, effects: { cleanliness: +20, relationship: +10 }, achievement: 'TEAMWORK' },
                    { text: { "zh-Hant": '„Äå‰Ω†ÂèØ‰ª•ÁöÑÔºÅÁõ∏‰ø°Ëá™Â∑±ÔºÅÊàëÂú®Á≤æÁ•û‰∏äÊîØÊåÅ‰Ω†ÔºÅ„ÄçÔºàÁπºÁ∫åÊâìÊéÉÂÆ¢Âª≥Ôºâ', "en": '"You can do it! I believe in you! I\'m with you in spirit!" (Continue cleaning the living room)' }, nextId: 102, effects: { cleanliness: +10, relationship: -2 }, achievement: 'SOLO_WARRIOR' }
                ]
            },
            {
                id: 10, image: '‚ú®', text: { "zh-Hant": 'Âú®ÂÖ©‰∫∫ÁöÑÂêà‰Ωú‰∏ãÔºåÂÆ∂ÂæàÂø´Â∞±ÊÅ¢Âæ©‰∫ÜÊï¥ÊΩî„ÄÇ‰Ω†ÂÄëÂùêÂú®‰πæÊ∑®ÁöÑÊ≤ôÁôº‰∏äÔºåÈõñÁÑ∂ÊúâÈªûÁ¥ØÔºå‰ΩÜÂøÉË£°ÂæàÊªøË∂≥„ÄÇ', "en": 'With both of you working together, the house quickly becomes tidy again. You sit on the clean sofa, a bit tired but very satisfied.' },
                 options: [
                    { text: { "zh-Hant": '„ÄåÁúãÔºåÊàëÂÄëÂêà‰ΩúËµ∑‰æÜÂ§öÂé≤ÂÆ≥ÔºÅ„Äç', "en": '"Look how amazing we are when we work together!"' }, nextId: 11, effects: { relationship: +5 } },
                    { text: { "zh-Hant": '„ÄåÁÇ∫‰∫ÜÊÖ∂Á•ùÂãùÂà©ÔºåÊàëÂÄë‰æÜÈªûÁçéÂãµÂêßÔºü„Äç', "en": '"To celebrate our victory, how about a little reward?"' }, nextId: 11, effects: { relationship: +5 } }
                ]
            },
             {
                id: 11, image: 'ü§ñ', text: { "zh-Hant": 'P2Á™ÅÁÑ∂Ë™™Ôºö„ÄåË™™ÁúüÁöÑÔºåÊàëÂÄëÊòØ‰∏çÊòØË©≤ËÄÉÊÖÆ‰∏Ä‰∏ã„ÄéÁßëÊäÄÁöÑÂäõÈáè„ÄèÔºü„ÄçÂ∞çÊñπÊâìÈñãÊâãÊ©üË≥ºÁâ©APPÔºåÈ†ÅÈù¢‰∏äÊòØÂêÑÁ®ÆÊéÉÂú∞Ê©üÂô®‰∫∫„ÄÅÊ¥óÁ¢óÊ©ü...', "en": 'P2 suddenly says: "Seriously, maybe we should consider the \'power of technology\'?" They open a shopping app, showing various robot vacuums, dishwashers...' },
                 options: [
                    { text: { "zh-Hant": '„ÄåÂ•Ω‰∏ªÊÑèÔºÅÊääÂ∞àÊ•≠ÁöÑ‰∫ã‰∫§Áµ¶Â∞àÊ•≠ÁöÑÊ©üÂô®ÔºÅ„Äç', "en": '"Great idea! Let the professional machines do the professional work!"' }, nextId: 12, effects: { money: -100 }, achievement: 'TECH_GEEK' },
                    { text: { "zh-Hant": '„ÄåÂóØ...ÈÄôÊòØ‰∏ÄÁ≠Ü‰∏çÂ∞èÁöÑÈñãÈä∑ÔºåÊàëÂÄëÂÖàÊâãÂãïÂ†ÖÊåÅ‰∏Ä‰∏ãÔºü„Äç', "en": '"Hmm... that\'s a big expense. Maybe we should stick to manual labor for now?"' }, nextId: 200, effects: { money: 0 } },
                    { text: { "zh-Hant": '„Äå‰Ω†ÊòØ‰∏çÊòØÂ∞±ÊÉ≥ÂÅ∑Êá∂ÔºÅ„Äç', "en": '"Are you just trying to be lazy!"' }, nextId: 3, effects: { relationship: -5 } }
                ]
            },
            {
                id: 12, image: 'üí∏', text: { "zh-Hant": '‰Ω†ÂÄëÁ≤æÊåëÁ¥∞ÈÅ∏Ôºå‰∏ãÂñÆ‰∫Ü‰∏ÄÂ•óÂÆ∂‰∫ãËºîÂä©Ê©üÂô®‰∫∫„ÄÇÂπæÂ§©ÂæåÔºå‰∏ÄÂÄãÂúìÊªæÊªæÁöÑÊéÉÂú∞Ê©üÂô®‰∫∫Âíå‰∏ÄÂÄãÊñπÊ≠£ÁöÑÊ¥óÁ¢óÊ©üÂä†ÂÖ•‰∫Ü‰Ω†ÂÄëÁöÑÂÆ∂Â∫≠„ÄÇ', "en": 'After careful consideration, you order a set of chore-bots. A few days later, a round robot vacuum and a square dishwasher join your family.' },
                 options: [
                    { text: { "zh-Hant": 'ÂæûÊ≠§ÈÅé‰∏ä‰∫ÜÂπ∏Á¶èÂø´Ê®ÇÁöÑÁîüÊ¥ª...ÂóéÔºü', "en": 'And they lived happily ever after... or did they?' }, nextId: 200, effects: { cleanliness: +30, stress: -20 } , achievement: 'PERFECT_ENDING' }
                ]
            },
            { id: 100, image: 'üíî', text: { "zh-Hant": 'Áà≠ÂêµÁÑ°Ê≥ïËß£Ê±∫‰ªª‰ΩïÂïèÈ°åÔºåÂè™ÊúÉÁïô‰∏ãÂÇ∑ÂÆ≥„ÄÇ‰Ω†ÂÄë‰πãÈñìÁöÑÈóú‰øÇÊ∫´Â∫¶ÈôçÂà∞‰∫ÜÂÜ∞Èªû„ÄÇ<br><br><b>„ÄêÁµêÂ±ÄÔºöÂÆ∂Â∫≠ÂÜ∑Êà∞„Äë</b><br>ÊàøÂ≠ê‰æùÁÑ∂Ê∑∑‰∫ÇÔºå‰ΩÜÊõ¥‰∫ÇÁöÑÊòØ‰Ω†ÂÄëÁöÑÂøÉ„ÄÇ', "en": 'Arguments solve nothing and only leave scars. The temperature of your relationship has dropped to freezing.<br><br><b>[Ending: Domestic Cold War]</b><br>The house is still a mess, but your hearts are even messier.' }, options: [{ text: { "zh-Hant": 'ÈáçÊñ∞ËÆÄÊ™î...', "en": 'Reload Save...' }, nextId: -1 }] },
            { id: 101, image: '‚ùÑÔ∏è', text: { "zh-Hant": 'Ê≤âÈªòÊòØÊ≠§ÂàªÊúÄÂÇ∑‰∫∫ÁöÑÊ≠¶Âô®„ÄÇ‰Ω†ÂÄëÂæÖÂú®Âêå‰∏ÄÂÄãÁ©∫ÈñìÔºåÂçªÂÉèÈöîËëóÂÖ©ÂÄã‰∏ñÁïå„ÄÇ<br><br><b>„ÄêÁµêÂ±ÄÔºöÊ≤âÈªòÁöÑË∑ùÈõ¢„Äë</b><br>ÂÆ∂‰∫ãÂïèÈ°åË¢´Êì±ÁΩÆÔºå‰ΩÜ‰∏ÄÂÄãÊõ¥Â§ßÁöÑË£ÇÁóïÂá∫Áèæ‰∫Ü„ÄÇ', "en": 'Silence is the most hurtful weapon right now. You share the same space but feel worlds apart.<br><br><b>[Ending: The Silent Distance]</b><br>The chore problem is ignored, but a much larger crack has appeared.' }, options: [{ text: { "zh-Hant": 'ÂõûÂà∞ÊäâÊìáÈªû...', "en": 'Return to choice...' }, nextId: -1 }] },
            { id: 102, image: 'üò•', text: { "zh-Hant": '‰Ω†‰∏ÄÂÄã‰∫∫ÈªòÈªòÂú∞ÊääÊâÄÊúâ‰∫ãÊÉÖÈÉΩÂÅöÂÆå‰∫Ü„ÄÇP2ÈõñÁÑ∂Ë™™‰∫ÜË¨ùË¨ùÔºå‰ΩÜ‰Ω†ÊÑüË¶∫Ëá™Â∑±Êõ¥ÂÉè‰∏ÄÂÄãÂÆ§ÂèãÔºåËÄå‰∏çÊòØ‰º¥‰æ∂„ÄÇ<br><br><b>„ÄêÁµêÂ±ÄÔºöÁõ°Ë≤¨ÁöÑÂÆ§Âèã„Äë</b><br>ÂÆ∂ËÆä‰πæÊ∑®‰∫ÜÔºå‰ΩÜÂøÉÁöÑË∑ùÈõ¢ÂçªËÆäÈÅ†‰∫Ü„ÄÇ', "en": 'You silently did everything by yourself. P2 said thanks, but you feel more like a roommate than a partner.<br><br><b>[Ending: The Dutiful Roommate]</b><br>The house is clean, but the distance between your hearts has grown.' }, options: [{ text: { "zh-Hant": 'ÂÜçË©¶‰∏ÄÊ¨°...', "en": 'Try again...' }, nextId: -1 }] },
            { id: 103, image: 'üçï', text: { "zh-Hant": '‰Ω†ÂÄëÂú®Ê∑∑‰∫Ç‰∏≠ÈÅîÊàê‰∫ÜÂ•áÂ¶ôÁöÑÂÖ±Ë≠òÔºöÂè™Ë¶ÅÁúã‰∏ç‰∏ãÂéªÁöÑ‰∫∫ÂéªÊî∂ÊãæÂ∞±Â•Ω„ÄÇÂ§ñË≥£ÁõíÂ†ÜÂæóÊØîË°£ÊúçÂ±±ÈÇÑÈ´ò„ÄÇ<br><br><b>„ÄêÁµêÂ±ÄÔºöÊ∑∑Ê≤åÂÖ±Áîü„Äë</b><br>Ë™∞Ë™™ÂÆ∂‰∏ÄÂÆöË¶Å‰∏ÄÂ°µ‰∏çÊüìÔºü‰Ω†ÂÄëÊâæÂà∞‰∫ÜÂ±¨ÊñºËá™Â∑±ÁöÑÔºåÊúâÈªû‚ÄúÈÇãÈÅ¢‚ÄùÁöÑÂπ∏Á¶è„ÄÇ', "en": 'You\'ve reached a strange consensus amidst the chaos: whoever can\'t stand it anymore is the one who cleans. The pile of takeout boxes is taller than the mountain of clothes.<br><br><b>[Ending: Symbiotic Chaos]</b><br>Who says a home has to be spotless? You\'ve found your own, slightly messy, brand of happiness.' }, options: [{ text: { "zh-Hant": 'ÈñãÂïü‰∫åÂë®ÁõÆ...', "en": 'New Game+...' }, nextId: -1 }] },
            { id: 104, image: 'üíÄ', text: { "zh-Hant": '‰Ω†ÂÄëÂæπÂ∫ïÊîæÊ£Ñ‰∫ÜÊ≤ªÁôÇ„ÄÇÂÆ∂Ë£°ÁöÑ‚ÄúÂÆ∂‰∫ãÁç∏‚ÄùÂÄëÈñãÂßãÁ®±ÁéãÁ®±Èú∏ÔºåÁîöËá≥ÊºîÂåñÂá∫‰∫ÜËá™Â∑±ÁöÑÊñáÊòé„ÄÇ<br><br><b>„ÄêÁµêÂ±ÄÔºöË¢´ÂÆ∂‰∫ãÁç∏Áµ±Ê≤ª„Äë</b><br>Êúâ‰∏ÄÂ§©Ôºå‰Ω†Âú®Ë•™Â≠êÂ†ÜË£°ÁôºÁèæ‰∫Ü‰∏ÄÂºµÂÆÉÂÄëÂØ´ÁöÑÁç®Á´ãÂÆ£Ë®Ä„ÄÇ', "en": 'You\'ve completely given up. The "Chore Beasts" in your home have started to rule the place, even evolving their own civilization.<br><br><b>[Ending: Ruled by Chore Beasts]</b><br>One day, you find a declaration of independence written by them in a pile of socks.' }, options: [{ text: { "zh-Hant": 'ÈáçÂïüÂÆáÂÆô...', "en": 'Restart Universe...' }, nextId: -1 }] },
            { id: 200, image: 'üíñ', text: { "zh-Hant": 'ÁÑ°Ë´ñÊòØÈÄèÈÅéÊ∫ùÈÄö„ÄÅÂêà‰ΩúÈÇÑÊòØÁßëÊäÄÔºå‰Ω†ÂÄëÊúÄÁµÇÊâæÂà∞‰∫ÜÊúÄÈÅ©ÂêàÂΩºÊ≠§ÁöÑÁõ∏ËôïÊ®°Âºè„ÄÇÂÆ∂‰∏çÂÜçÊòØÊà∞Â†¥ÔºåËÄåÊòØÂÖ±ÂêåÁ∂ìÁáüÁöÑÊÑõÂ∑¢„ÄÇ<br><br><b>„ÄêÂÆåÁæéÁµêÂ±ÄÔºöÊÑõÂ∑¢ÂêàÂ§•‰∫∫„Äë</b><br>ÊÅ≠ÂñúÔºÅ‰Ω†ÂÄë‰∏çÂÉÖÊ∏ÖÁêÜ‰∫Ü‰∏ÄÈñìÊàøÂ≠êÔºåÊõ¥ÊòØÂª∫Á´ã‰∫Ü‰∏ÄÂÄãÂÆ∂„ÄÇ', "en": 'Whether through communication, cooperation, or technology, you finally found a way of living together that suits you both. Home is no longer a battlefield, but a love nest you build together.<br><br><b>[Perfect Ending: Love Nest Partners]</b><br>Congratulations! You didn\'t just clean a house, you built a home.' }, options: [{ text: { "zh-Hant": 'ÊåëÊà∞Êõ¥Â§öÂèØËÉΩÔºÅ', "en": 'Challenge other possibilities!' }, nextId: -1 }] }
        ];

        const appState = {
            gameState: {},
            achievements: {}
        };

        function setLanguage(lang, initialLoad = false) {
            currentLang = lang;
            document.documentElement.lang = lang;
            
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.dataset.langKey;
                if (uiTranslations[key] && uiTranslations[key][lang]) {
                    el.innerHTML = uiTranslations[key][lang];
                }
            });

            const langBtn = document.getElementById('language-toggle-btn');
            if (lang === 'en') {
                langBtn.textContent = 'ÁπÅÈ´î‰∏≠Êñá';
            } else {
                langBtn.textContent = 'English';
            }
            
            if (!initialLoad) {
                const currentSceneId = appState.gameState.currentSceneId || 1;
                showScene(currentSceneId); 
                updateStatusPage();
                updateAchievementsPage();
            }

            saveSettings();
        }

        function saveSettings() {
             try {
                const settings = {
                    lang: currentLang,
                    theme: document.body.dataset.theme,
                    fontSize: currentFontSize
                };
                localStorage.setItem(SAVE_KEY_SETTINGS, JSON.stringify(settings));
            } catch (e) {
                console.error("Failed to save settings:", e);
            }
        }

        function loadSettings() {
            try {
                const savedSettings = localStorage.getItem(SAVE_KEY_SETTINGS);
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    
                    preColorblindTheme = (settings.theme === 'light' || settings.theme === 'dark') ? settings.theme : 'light';
                    document.body.dataset.theme = settings.theme;
                    updateThemeButtons(settings.theme);

                    currentFontSize = settings.fontSize || 16;
                    document.documentElement.style.setProperty('--font-size-base', `${currentFontSize}px`);

                    setLanguage(settings.lang || 'zh-Hant', true);
                } else {
                    setLanguage('zh-Hant', true);
                }
            } catch (e) {
                console.error("Failed to load settings:", e);
                setLanguage('zh-Hant', true);
            }
        }

        function saveAchievements() {
            try {
                const achievementsToSave = {};
                for (const key in appState.achievements) {
                    achievementsToSave[key] = { unlocked: appState.achievements[key].unlocked };
                }
                localStorage.setItem(SAVE_KEY_ACHIEVEMENTS, JSON.stringify(achievementsToSave));
            } catch (e) {
                console.error("Failed to save achievements:", e);
            }
        }

        function loadAchievements() {
            try {
                for (const key in achievementsData) {
                    appState.achievements[key] = { ...achievementsData[key], unlocked: false };
                }

                const savedData = localStorage.getItem(SAVE_KEY_ACHIEVEMENTS);
                if (savedData) {
                    const unlockedStatus = JSON.parse(savedData);
                    for (const key in unlockedStatus) {
                        if (appState.achievements[key]) {
                            appState.achievements[key].unlocked = unlockedStatus[key].unlocked;
                        }
                    }
                }
            } catch (e) {
                console.error("Failed to load achievements:", e);
            }
        }

        function initializeGame() {
            appState.gameState = {
                relationship: 50,
                stress: 20,
                cleanliness: 30,
                money: 100,
                day: 1,
                currentSceneId: 1
            };
            unlockAchievement('START');
            showScene(1);
            updateStatusPage();
            updateAchievementsPage();
        }

        function showScene(sceneId) {
            const sceneData = storyNodesData.find(node => node.id === sceneId);
            if (!sceneData) return;

            appState.gameState.currentSceneId = sceneId;
            document.getElementById('scene-image').textContent = sceneData.image;
            document.getElementById('dialogue-box').innerHTML = sceneData.text[currentLang];

            const optionsBox = document.getElementById('options-box');
            optionsBox.innerHTML = '';

            if (sceneData.options) {
                sceneData.options.forEach(optionData => {
                    const button = document.createElement('button');
                    button.innerText = optionData.text[currentLang];
                    button.classList.add('option-btn');
                    button.addEventListener('click', () => selectOption(optionData));
                    optionsBox.appendChild(button);
                });
            }
        }

        function selectOption(option) {
            if (option.effects) {
                for (const key in option.effects) {
                    appState.gameState[key] += option.effects[key];
                    if (appState.gameState[key] > 100) appState.gameState[key] = 100;
                    if (appState.gameState[key] < 0) appState.gameState[key] = 0;
                }
            }
            if(option.achievement) {
                unlockAchievement(option.achievement);
            }
            
            const nextSceneId = option.nextId;
            if (nextSceneId <= 0) {
                return initializeGame();
            }
            updateStatusPage();
            showScene(nextSceneId);
        }

        function unlockAchievement(key) {
            if (appState.achievements[key] && !appState.achievements[key].unlocked) {
                appState.achievements[key].unlocked = true;
                const toastMsg = uiTranslations.ach_unlocked_toast[currentLang] + appState.achievements[key].name[currentLang];
                showToast(toastMsg);
                updateAchievementsPage();
                saveAchievements();
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.textContent = message;
            toast.setAttribute('role', 'alert');
            toast.style.position = 'fixed';
            toast.style.fontFamily = "'DotGothic16', sans-serif";
            toast.style.bottom = '20px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = 'var(--accent-bg-color)';
            toast.style.color = 'var(--btn-active-text-color)';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '0px';
            toast.style.zIndex = '2000';
            toast.style.border = '3px solid var(--border-color)';
            toast.style.boxShadow = '4px 4px 0 var(--shadow-color)';
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function updateStatusPage() {
            const container = document.getElementById('status-grid-content');
            const gs = appState.gameState;
            container.innerHTML = `
                <div class="card">
                    <h3>${uiTranslations.status_relationship_title[currentLang]}</h3>
                    <p>${uiTranslations.status_relationship_desc[currentLang]}</p>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${gs.relationship}" aria-valuemin="0" aria-valuemax="100"><div class="progress-bar-inner" style="width: ${gs.relationship}%;"></div></div>
                    <span>${gs.relationship} / 100</span>
                </div>
                <div class="card">
                    <h3>${uiTranslations.status_stress_title[currentLang]}</h3>
                    <p>${uiTranslations.status_stress_desc[currentLang]}</p>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${gs.stress}" aria-valuemin="0" aria-valuemax="100"><div class="progress-bar-inner" style="width: ${gs.stress}%;"></div></div>
                    <span>${gs.stress} / 100</span>
                </div>
                <div class="card">
                    <h3>${uiTranslations.status_cleanliness_title[currentLang]}</h3>
                    <p>${uiTranslations.status_cleanliness_desc[currentLang]}</p>
                    <div class="progress-bar" role="progressbar" aria-valuenow="${gs.cleanliness}" aria-valuemin="0" aria-valuemax="100"><div class="progress-bar-inner" style="width: ${gs.cleanliness}%;"></div></div>
                    <span>${gs.cleanliness} / 100</span>
                </div>
                 <div class="card">
                    <h3>${uiTranslations.status_money_title[currentLang]}</h3>
                    <p>${uiTranslations.status_money_desc[currentLang]}</p>
                     <h3>${gs.money}</h3>
                </div>
            `;
        }

        function updateAchievementsPage() {
            const container = document.getElementById('achievement-grid-content');
            container.innerHTML = '';
            for (const key in appState.achievements) {
                const ach = appState.achievements[key];
                const card = document.createElement('div');
                card.className = `card achievement ${ach.unlocked ? 'unlocked' : ''}`;
                card.innerHTML = `
                    <h3>${ach.icon} ${ach.name[currentLang]}</h3>
                    <p>${ach.unlocked ? ach.desc[currentLang] : uiTranslations.ach_locked_desc[currentLang]}</p>
                `;
                container.appendChild(card);
            }
        }

        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.nav-btn.active').classList.remove('active');
                btn.classList.add('active');
                
                const activeView = document.querySelector('.view.active');
                activeView.classList.remove('active');
                activeView.setAttribute('aria-hidden', 'true');
                
                const newView = document.getElementById(btn.dataset.view);
                newView.classList.add('active');
                newView.setAttribute('aria-hidden', 'false');
            });
        });

        document.getElementById('settings-btn').addEventListener('click', () => document.getElementById('settings-modal').classList.add('show'));
        document.getElementById('info-btn').addEventListener('click', () => document.getElementById('info-modal').classList.add('show'));
        
        document.querySelectorAll('.close-modal').forEach(btn => {
            btn.addEventListener('click', () => document.getElementById(btn.dataset.modal).classList.remove('show'));
        });
        
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('show');
            });
        });
        
        document.getElementById('language-toggle-btn').addEventListener('click', () => {
            const newLang = currentLang === 'zh-Hant' ? 'en' : 'zh-Hant';
            setLanguage(newLang);
        });

        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        themeToggleBtn.addEventListener('click', () => {
            const currentTheme = document.body.dataset.theme;
            let newTheme;
            if (currentTheme === 'light') {
                newTheme = 'dark';
            } else {
                newTheme = 'light';
            }
            document.body.dataset.theme = newTheme;
            preColorblindTheme = newTheme;
            updateThemeButtons(newTheme);
            saveSettings();
        });

        const colorblindToggleBtn = document.getElementById('colorblind-toggle-btn');
        colorblindToggleBtn.addEventListener('click', () => {
            const currentTheme = document.body.dataset.theme;
            let newTheme;
            if (currentTheme === 'colorblind') {
                newTheme = preColorblindTheme;
            } else {
                preColorblindTheme = currentTheme;
                newTheme = 'colorblind';
            }
            document.body.dataset.theme = newTheme;
            updateThemeButtons(newTheme);
            saveSettings();
        });
        
        function updateThemeButtons(theme) {
            if (theme === 'colorblind') {
                colorblindToggleBtn.dataset.langKey = 'settings_colorblind_toggle_off';
                colorblindToggleBtn.innerText = uiTranslations.settings_colorblind_toggle_off[currentLang];
                themeToggleBtn.style.display = 'none';
            } else {
                colorblindToggleBtn.dataset.langKey = 'settings_colorblind_toggle_on';
                colorblindToggleBtn.innerText = uiTranslations.settings_colorblind_toggle_on[currentLang];
                themeToggleBtn.style.display = 'block';

                if (theme === 'dark') {
                    themeToggleBtn.dataset.langKey = 'settings_theme_toggle_light';
                    themeToggleBtn.innerText = uiTranslations.settings_theme_toggle_light[currentLang];
                } else {
                    themeToggleBtn.dataset.langKey = 'settings_theme_toggle_dark';
                    themeToggleBtn.innerText = uiTranslations.settings_theme_toggle_dark[currentLang];
                }
            }
        }

        let currentFontSize = 16;
        document.getElementById('font-increase-btn').addEventListener('click', () => {
            currentFontSize = Math.min(24, currentFontSize + 2);
            document.documentElement.style.setProperty('--font-size-base', `${currentFontSize}px`);
            saveSettings();
        });
        document.getElementById('font-decrease-btn').addEventListener('click', () => {
            currentFontSize = Math.max(12, currentFontSize - 2);
            document.documentElement.style.setProperty('--font-size-base', `${currentFontSize}px`);
            saveSettings();
        });
        
        document.getElementById('reset-progress-btn').addEventListener('click', () => {
            if (confirm(uiTranslations.confirm_reset[currentLang])) {
                localStorage.removeItem(SAVE_KEY_ACHIEVEMENTS);
                showToast(uiTranslations.reset_toast[currentLang]);
                setTimeout(() => location.reload(), 1500);
            }
        });

        function initAccessibilityPopup() {
            const accessibilityModal = document.getElementById('accessibility-modal');
            const hasSeen = localStorage.getItem('accessibilityNoticeShown');

            if (!hasSeen) {
                accessibilityModal.classList.add('show');
            }

            document.getElementById('close-accessibility-modal').addEventListener('click', () => {
                accessibilityModal.classList.remove('show');
                localStorage.setItem('accessibilityNoticeShown', 'true');
            });
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            loadAchievements();
            initializeGame();
            initAccessibilityPopup();
        });
    </script>
</body>
</html>
